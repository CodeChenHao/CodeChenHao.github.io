<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>MySQL教程 | Johnny的空间站</title><meta name="keywords" content="教程,数据库,MySQL,RDBMS"><meta name="author" content="Mr.Chen"><meta name="copyright" content="Mr.Chen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="MySQL教程"><meta name="application-name" content="MySQL教程"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="MySQL教程"><meta property="og:url" content="https://chenhaonan.dpdns.org/posts/b9a6/index.html"><meta property="og:site_name" content="Johnny的空间站"><meta property="og:description" content="MYSQL的相关概念、安装、SQL、多表查询以及事务等"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://chenhaonan.dpdns.org/images/MySQL%E6%95%99%E7%A8%8B/cover.png"><meta property="article:author" content="Mr.Chen"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://chenhaonan.dpdns.org/images/MySQL%E6%95%99%E7%A8%8B/cover.png"><meta name="description" content="MYSQL的相关概念、安装、SQL、多表查询以及事务等"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://chenhaonan.dpdns.org/posts/b9a6/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-ruddy-six.vercel.app/',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助"]},
  algolia: {"appId":"AT743L39US","apiKey":"0833ddb85b214487ec625f98b115d700","indexName":"hexo-blog","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Mr.Chen","link":"链接: ","source":"来源: Johnny的空间站","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Johnny的空间站',
  title: 'MySQL教程',
  postAI: '',
  pageFillDescription: '一、数据库相关概念, 1.1 数据库, 1.2 数据库软件, 1.3 SQL, 二、常见的关系型数据库管理系统, 三、MySQL数据库, 3.1 安装MySQL, 3.2 设置Root账户可远程访问数据库, 3.3 卸载MySQL, 3.4 MySQL的数据模型, 四、SQL, 4.1 SQL通用语法, 4.2 SQL分类, 4.3 DDL, 4.3.1 数据库相关操作, 4.3.2 数据表相关操作, 4.3.3 数据类型, 4.4 DML, 4.4.1 增加数据, 4.4.2 删除数据, 4.4.3 修改数据, 4.5 DQL, 4.5.1 基础查询, 4.5.2 条件查询, 4.5.3 分组查询, 4.5.4 排序查询, 4.5.5 分页查询, 五、约束, 5.1 约束的概念, 5.2 约束分类, 5.3 自增长, 5.4 添加约束(非外键约束), 5.4.1 创建表的时候添加, 5.4.2 创建完表之后添加, 5.5 删除约束(非外键约束), 5.6 添加外键约束, 5.6.1 创建表的时候添加, 5.6.2 创建完表之后添加, 5.7 删除外键约束, 六、数据库设计, 6.1 数据库设计的概念, 6.2 表与表之间的关系, 6.2.1 一对一, 6.2.2 一对多, 6.2.3 多对多, 七、多表查询, 7.1 笛卡尔积, 7.2 连接查询, 7.2.1 内连接, 7.2.2 外连接, 7.3 子查询, 7.3.1 单行单列, 7.3.2 多行单列, 7.3.3 多行多列, 八、事务, 8.1 事务简介, 8.2 事务操作, 8.3 事务四大特性, 8.4 MySQL事务的提交方式, 8.5 事务的隔离级别, 8.5.1  读未提交(read uncommitted), 8.5.2 读已提交(read committed), 8.5.3 可重复读(repeatable read), 8.5.4 串行化(serializable), 8.5.5 设置数据库事务隔离级别, 九、存储过程, 9.1 SQL指令执行过程, 9.2 存储过程介绍, 9.3 存储过程优缺点分析, 9.4 创建存储过程, 9.5 调用存储过程, 9.6 存储过程中的变量, 9.6.1 定义局部变量, 9.6.2 定义用户变量, 9.6.3 给变量赋值, 9.6.4 将查询结果赋值给变量, 9.6.5 用户变量使用注意事项, 9.7 存储过程的参数, 9.7.1 IN 输入参数, 9.7.2 OUT 输出参数, 9.7.3 INOUT 输入输出参数, 9.8 存储过程中的流程控制, 9.8.1 分支语句, 9.8.2 循环语句, 9.9 查询存储过程, 9.10 修改存储过程, 9.11 删除存储过程, 9.12 游标, 9.12.1 游标的概念, 9.12.2 游标使用步骤, 9.12.3 游标使用案例, 十、触发器, 10.1 触发器介绍, 10.2 创建触发器, 10.3 查看触发器, 10.4 删除触发器, 10.5 NEW与OLD, 10.6 触发器使用终结, 十一、视图, 11.1 视图的概念, 11.2 视图的作用, 11.3 创建视图, 11.4 查看视图, 11.5 修改视图, 11.6 删除视图, 11.7 视图数据的特性, 十二、索引, 12.1 索引介绍, 12.2 索引分类, 12.3 创建索引, 12.4 查看索引, 12.5 删除索引, 12.6 索引的使用, 12.7 索引的使用总结一数据库相关概念数据库数据库即存储数据的仓库数据是有组织的存储英文简称数据库软件数据库软件即管理数据库的软件英文简称英文简称结构化查询语言操作关系型数据库的编程语言定义操作所有关系型数据库的统一标准二常见的关系型数据库管理系统开源免费的中小型数据库收费的大型数据库公司收费的的中型数据库公司的大型收费数据库开源免费的中小型数据库开源免费的中小型数据库嵌入式的微型数据库如作为内置数据库三数据库安装在中通过安装注目前学习阶段未对的数据目录做数据卷的处理删除容器后数据也会消失因此删除容器前注意备份数据安装步骤如下拉取镜像运行镜像产生容器设置账户可远程访问数据库在中要设置用户可以从远程主机访问你需要执行几个步骤以下是如何实现的步骤登录首先你需要以用户身份登录到服务器这通常是在服务器上本地完成的输入密码后你将进入提示符创建远程用户如果还没有的话默认情况下的用户可能只允许从访问要允许从任何主机访问你需要为该用户指定一个通配符但这并不安全建议只允许来自特定主机的连接但如果你只是想测试或临时允许从任何主机访问可以这样做注意需要替换为你的密码出于安全考虑强烈建议仅为受信任的主机创建用户而不是使用刷新权限为了让新的权限设置立即生效你需要刷新的权限表开放端口测试远程连接从远程主机使用客户端工具如命令行工具或任何图形界面工具尝试连接到服务器确保使用正确的地址端口和凭据输入你在步骤中设置的密码注意允许从远程主机访问的用户可能会带来安全风险确保你了解这些风险并仅在必要时采取此操作在生产环境中通常建议创建具有适当权限的专用用户来管理远程连接卸载通过安装的卸载十分的方便卸载即删除对应的容器注目前学习阶段未对的数据目录做数据卷的处理删除容器后数据也会消失因此删除容器前注意备份数据删除容器的命令容器的数据模型关系型数据库关系型数据库即通过多张能够相互连接的二维表来存储数据的数据库数据模型一个数据库管理系统中可以创建多个数据库一个数据库中可以创建多张数据表一个表中可以存放多条数据数据库文件夹的方式存在数据表以结尾的文件数据以结尾的文件四通过来告诉数据库管理系统做什么操作根据的数据模型可以看出需要通过来操作数据库数据表以及数据表中的数据操作的类型分为增删改查通用语法语句可以单行或多行书写以分号结尾语句不区分大小写关键字建议使用大写注释单行注释内容多行注释内容单行注释内容特有分类数据定义语言用于定义数据库对象数据库表视图索引存储过程等操作数据库和数据表视图索引存储过程数据库操作语言用于对数据库中的表的数据进行增删改的操作操作表中的数据数据库查询语言用于对数据库中的表的数据进行查询操作操作表中的数据数据库控制语言用于定义数据库的访问权限和安全级别用户用户权限事务等操作数据库相关操作增加数据库创建数据库数据库名创建数据库当指定的数据库不存在时才执行数据库名在创建数据库的同时指定数据库的字符集数据存储在数据库中采用的编码格式数据库名数据库名删除数据库删除数据库数据库名删除数据库当指定的数据库存在时才执行数据库名修改数据库修改数据库的字符集数据库名查询数据库显示当前数据库中的数据库列表查看当前使用的数据库显示指定名称的数据库创建的指令数据库名使用数据库数据库名数据表相关操作增加表注字段的最后一行尾不能加逗号创建表表名字段名数据类型约束字段描述字段名数据类型约束字段描述字段名数据类型约束字段描述创建表当表不存在时才执行表名字段名数据类型约束字段描述字段名数据类型约束字段描述字段名数据类型约束字段描述删除表删除表表名删除表当表存在时才执行表名修改表修改表名表名新表名修改表的字符集表名添加列表名列名数据类型约束字段描述删除字段表名列名修改列的数据类型表名列名新的数据类型修改列的列名和数据类型表名列名新列名新数据类型查询表查询当前数据库下的所有表的名称查询表结构表名称数据类型数值类型类型内存空间大小范围说明有符号无符号特小型整数年龄有符号无符号小型整数有符号无符号中型整数整数大型整数单精度双精度一般情况第一个参数表示数值一共为位小数位有位字符串类型在数据库中存储图片或者视频音频等内容一般是存储文件在服务器上的路径当然如果非要存储就需要将图片等数据转成二进制进行存储所以类型是可以存储所有类型的但是前提是需要转换成二进制所以此类型用的很少类型一般用于类型储存不下的时候类型字符长度说明字节定长字符串最多可以存储个字符当我们指定数据表字段为时此列中的数据最长为如果添加的数据少于则补至长度字节可变长度字符串此类型的列最大长度为字节存储二进制字符串字节存储二进制字符串字节存储二进制字符串字节存储二进制字符串字节文本数据字符串字节文本数据字符串字节文本数据字符串字节文本数据字符串日期类型类型格式说明日期只存储年月日时间只存储时分秒日期时间存储年月日时分秒年份时间戳日期时间时间戳增加数据表名列名列名列名值值值表名值值值表名列名列名列名值值值值值值表名值值值值值值删除数据表名条件修改数据表名列名值列名值条件基本语法字段列表表名列表条件列表分支字段列表分组后的条件列表排序字段列表分页限定查询分类基础查询条件查询分组查询排序查询分页查询基础查询格式字段列表表名表名去除重复记录字段列表表名起别名字段字段别名表名字段字段别名表名条件查询格式字段列表表名条件列表条件或分组查询聚合函数格式字段列表表名条件列表分组字段名分组后的过滤条件注意事项分组后查询的字段为聚合函数和分组字段查询其他字段无任何意义与的区别执行时机不一样是在分组之前进行限定不满足条件的数据不参与分组而是分组之后对结果进行过滤判断条件不一样不能对聚合函数进行判断可以执行顺序聚合函数排序查询格式字段列表表名排序字段名排序方式排序字段名排序方式排序方式升序默认值降序注如果有多个排序条件当前面的条件值一样时才会根据第二条件排序分页查询格式字段列表表名起始索引查询条目数注意事项起始索引从开始计算公式起始索引当前页码每页显示的条数分页查询是数据库的方言分页查询使用分页查询使用五约束约束的概念约束是作用于表中列上的规则用于现状加入表中的数据约束的存在保证了数据库中的数据的完整性有效性正确性约束分类注不支持检查约束自增长条件当列是数字类型的时候可以加自增长添加约束非外键约束创建表的时候添加表名列名数据类型约束列名数据类型约束列名数据类型约束创建完表之后添加表名字段数据类型约束删除约束非外键约束表名字段数据类型添加外键约束创建表的时候添加表名列名数据类型列名数据类型列名数据类型外键名称外键列名主表主表列名创建完表之后添加表名外键名称外键列名主表主表列名删除外键约束表名外键名称六数据库设计数据库设计的概念数据库设计即针对某个系统的需求进行设计确定需要哪些表表中有那些字段以及表于表之间的关系表与表之间的关系一对一一对一如人与身份证号一个人拥有一个身份证号一个身份证号对应一个人实现方式在任意一方加外键指向另一方的主键且在外键字段上添加唯一约束一对一的表关系一般用于表的拆分将常用的字段放在一张表不常用的字段放在另一张表用于提升查询性能一对多一对多如部门和员工一个部门对应多个员工一个员工对应一个部门实现方式在多的一方建立外键指向一的一方的主键多对多多对多如订单和商品一个订单可以包含多个商品一种商品可以属于多个订单实现方式建立第三种中间表中间表至少包含两个外键分别关联两方的主键七多表查询笛卡尔积笛卡尔积取集合所有组合情况最终查询出来的数据条数为多张表的分别记录条数的乘积这种方式的查询会存在许多无效的数据因此通常不会使用下面的查询方式字段列表连接查询内连接内连接相当于查询交集数据隐式内连接字段列表显示内连接字段列表外连接左外连接左外连接相当于查询表所有数据和交集部分数据字段列表右外连接左外连接相当于查询表所有数据和交集部分数据字段列表子查询子查询查询中嵌套查询嵌套查询为子查询子查询根据查询结果不同作用不同可分为单行单列多行单列多行多列单行单列单行单列作为条件值使用等进行条件判断字段列表表字段名子查询多行单列多行单列作为条件值使用关键字进行条件判断字段列表表字段名子查询多行多列多行多列作为虚拟表字段列表子查询条件八事务事务简介数据库的事务是一种机制一个操作序列包含了一组数据库操作命令事务把所有的命令看作一个整体一起向系统提交或撤销操作请求即这组数据库命令要么同时成功要么同时失败事务是一个不可分割是工作逻辑单元事务操作开启事务开启事务即告诉系统下面的数据库操作命令为临时的操作不会真正的操作数据库中的数据直到提交事务时才真正的对数据库进行操作或提交事务提交事务即告诉系统所有的临时操作已经编写完成可以按照临时操作对数据库中的数据进行真正的操作回滚事务回滚事务即出现异常时告诉系统撤销临时操作回到开启事务前的状态事务四大特性原子性事务是不可分割的最小操作单元要么同时成功要么同时失败一致性事务完成时必须使所有的数据都保持一致状态隔离性多个事务之间相互隔离操作的可见性持久性事务一旦提交或回滚它对数据库中的数据的改变就是永久的事务的提交方式查询结果为表示自动提交事务默认自动提交查询结果为表示需手动提交修改事务的提交方式事务的隔离级别数据库允许多个事务并行多个事务之间是隔离的相互独立的如果事务之间不相互隔离并且操作同一数据时可能会导致数据的一致性被破坏读未提交可以读取执行但未提交的数据可能会导致出现脏读脏读一个事务读取到了另一个事务中未提交的数据读已提交只能读取已经提交的数据避免了脏读但可能会导致不可重复度虚读不可重复度虚读在同一个事务中两次查询操作读取到数据不一致例如进行第一次查询之后在第二次查询之前修改并提交了数据进行第二次查询时读取到的数据和第一次查询读取到数据不一致可重复读执行第一次查询之后在事务结束之前其他事务不能修改对应的数避免了不可重复读虚读但可能会导致幻读幻读对数据表中的数据进行修改然后查询在查询之前向数据表中新增了一条数据就导致以为修改了所有数据但却查询出了与修改不一致的数据事务新增的数据串行化同时只允许一个事务对数据表进行操作避免了脏读虚读幻读问题设置数据库事务隔离级别我们可以通过设置数据库默认的事务隔离级别来控制事务之间的隔离性也可以通过客户端与数据库连接设置来设置事务间的隔离性在应用程序中设置数据库默认的隔离级别为可重复读查看数据库默认的隔离级别在之前在之后设置默认隔离级别隔离级别九存储过程指令执行过程从执行执行的流程中我们分析存在的问题如果我们需要重复多次执行相同的指令都需要通过连接传递到并且需要经过编译和执行的步骤如果我们需要连续执行多个指令并且第二个指令需要使用第一个指令执行的结果作为参数存储过程介绍存储过程将能够完成特定功能的指令进行封装指令集编译之后存储在数据库服务器上并且为之取一个名字客户端可以通过名字直接调用这个指令集获取执行结果存储过程优缺点分析存储过程优点指令无需客户端编写通过网络传送可以节省网络开销同时避免指令在网络传输过程中被恶意篡改保证安全性存储过程经过编译创建并保存在数据库中的执行过程无需重复的进行编译操作对指令的执行过程进行了性能提升存储过程中多个指令之间存在逻辑关系支持流程控制语句分支循环可以实现更为复杂的业务存储过程缺点存储过程是根据不同的数据库进行编译创建并存储在数据库中当我们需要切换到其他的数据库产品时需要重写编写针对于新数据库的存储过程存储过程受限于数据库产品如果需要高性能的优化会成为一个问题在互联网项目中如果需要数据库的高连接并发访问使用存储过程会增加数据库的连接执行时间因为我们将复杂的业务交给了数据库进行处理创建存储过程语法存储过程名称示例创建一个存储过程实现加法运算调用存储过程语法存储过程名称示例调用存储过程定义变量调用存储过程将传递给将传递给将传递给显示变量值系统表无需创建定义变量的值都会在这里存储过程中的变量存储过程中的变量分为两种局部变量和用户变量定义局部变量语法局部变量要定义在存储过程中而且必须定义在存储过程开始参数名参数类型默认值示例定义类型默认值为定义定义用户变量用户变量相当于全局变量定义的用户变量可以通过进行查询语法用户变量会存储在数据库的数据字典中用户变量定义使用关键字直接定义变量名要以开头给变量赋值无论是局部变量还是用户变量都是使用关键字修改值语法变量名值示例将查询结果赋值给变量在存储过程中使用给变量赋值示例查询学生数量注意在储存过程中使用语句需要将结果赋值给变量那么就需要使用关键字来进行赋值将查询到学生数量赋值给调用存储过程用户变量使用注意事项因为用户变量相当于全局变量可以在指令以及多个存储过程中共享在开发中建议尽量少使用用户变量用户变量过多会导致程序不易理解难以维护存储过程的参数存储过程的参数一共有三种输入参数输入参数在调用存储过程中传递数据给存储过程的参数在调用的过程必须为具有实际值的变量或者字面值示例创建存储过程添加学生信息小丽女输出参数输出参数将存储过程中产生的数据返回给过程调用者相当于方法的返回值但不同的是一个存储过程可以有多个输出参数示例创建存储过程根据学生学号查询学生姓名输入输出参数输入输出参数该类型的参数既是输入参数也是输入参数注意此方式不建议使用一般我们输入就用输出就用此参数代码可读性低容易混淆示例存储过程中的流程控制分支语句单分支如果条件成立则执行如果参数的值为则添加一条班级信息双分支如果条件成立则执行否则执行如果参数的值为则添加一条班级信息否则添加一条学生信息小花女如果的值为则执行如果的值为则执行小刚男如果变量的值和所有的值都不匹配则执行中的这个循环语句结束循环的条件离开循环查询存储过程存储过程是属于某个数据库的也就是说当我们将存储过程创建在某个数据库之后只能在当前数据库中调用此存储过程查询存储过程查询某个数据库中有哪些存储过程查询所有存储过程根据数据库名查询当前数据库中的存储过程查询存储过程的创建细节修改存储过程修改存储过程指的是修改存储过程的特征特性存储过程名称特征特征特征存储过程的特征参数表示子程序包含语句但不包含读或写数据的语句表示子程序中不包含语句表示子程序中包含读数据的语句表示子程序中包含写数据的语句指明谁有权限来执行表示只有定义者自己才能够执行表示调用者可以执行表示注释信息删除存储过程删除存储过程删除数据库中的对象数据库数据表列存储过程视图触发器索引删除数据表中的数据存储过程名称游标问题如果我们要创建一个存储过程需要返回查询语句查询到的多条数据该如何实现呢游标的概念游标可以用来依次取出查询结果集中的每一条数据逐条读取查询结果集中的记录游标使用步骤声明游标声明游标语法游标名称示例打开游标语法游标名称示例使用游标语法使用游标提取游标当前指向的记录提取之后游标自动下移游标名称示例关闭游标语法游标名称示例游标使用案例中函数用来通过指定符号将个或多个字段拼接在一起返回拼接后的字符串游标变量游标变量计数变量计数变量每条数据查询语句执行之后返回的是一个结果集多条记录使用游标遍历查询结果集记录总数据量打开游标开始遍历游标提取游标中的数据并将结果赋值给游标变量不同的写法案例测试十触发器触发器介绍触发器就是一种特殊的存储过程触发器和存储过程一样是一个能够完成特定功能存储在数据库服务器上的片段但是触发器无需调用当对数据表中的数据执行操作时自动触发这个片段的执行无需手动调用在只有执行操作才能触发触发器的执行创建触发器语法触发器名称定义触发时机定义类型表名声明为行级触发器只要操作一条记录就触发触发器执行一次触发器操作示例添加学生信息查看触发器删除触发器触发器名称与触发器用于监听对数据表中数据的操作在触发器中通常处理一些的关联操作我们可以使用和关键字在触发器中获取触发这个触发器的操作的数据在触发器中用于获取操作添加的数据操作修改后的记录在触发器中用于获取操作删除前的数据操作修改前的数据操作中表示添加的新记录添加学生信息操作中表示修改后的数据创建触发器在监听操作的触发器中可以使用获取修改后的数据修改学生信息为操作中表示删除的记录删除学生信息操作中表示修改前的记录将学生姓名从修改为触发器使用终结优点触发器是自动执行的当对触发器相关的表执行响应的操作时立即执行触发器可以实现表中的数据的级联操作关联操作有利于保证数据的完整性触发器可以对操作的数据进行更为复杂的合法性校验比如校验学员年龄缺点使用触发器实现的业务逻辑如果出现问题将难以定位后期维护困难大量使用触发器容易导致代码结构杂乱增加了程序的复杂当触发器操作的数据量比较大时执行效率会大大降低使用建议在互联网项目中应避免使用触发器对于并发量不大的项目可以选择使用存储过程但是在互联网引用中不提倡使用存储过程原因存储过程时将实现业务的逻辑交给数据库处理一则增减了数据库的负载二则不利于数据库的迁移十一视图视图的概念视图就是由数据库中一张表或者多张表根据特定的条件查询出得数据构造成得虚拟表视图的作用安全性如果我们直接将数据表授权给用户操作那么用户可以数据表中所有数据加入我们想要对数据表中的部分数据进行保护可以将公开的数据生成视图授权用户访问视图用户通过查询视图可以获取数据表中公开的数据从而达到将数据表中的部分数据对用户隐藏简单性如果我们需要查询的数据来源于多张数据表可以使用多表连接查询来实现我们通过视图将这些连表查询的结果对用户开放用户则可以直接通过查询视图获取多表数据操作更便捷创建视图视图名称查看视图查询视图结构视图名称修改视图方式视图名称方式视图名称删除视图视图名称视图数据的特性视图是虚拟表查询视图的数据是来源于数据表的当对视图进行操作时对原数据表中的数据是否由影响呢查询操作如果在原表中添加了新的数据而且这个数据满足创建视图时查询语句的条件通过查询视图也可以查询出新增的数据当删除原表中满足查询条件的数据时也会从视图中删除新增数据如果在视图中添加数据数据会被添加到原数据表删除数据如果从视图删除数据数据也将从原表中删除修改操作如果通过修改数据则也将修改原数据表中的数据视图的使用建议对复杂查询简化操作并且不会对数据进行修改的情况下可以使用视图十二索引数据库是用来存储数据在互联网应用中数据库中存储的数据可能会很多大数据数据表中数据的查询速度会随着数据量的增长逐渐变慢从而导致响应用户请求的速度变慢用户体验差我们如何提高数据库的查询效率呢索引介绍索引就是用来提高数据表中数据的查询效率的索引就是将数据表中某一列某几列的值取出来构造成便于查找的结构进行存储生成数据表的目录当我们进行数据查询的时候则先在目录中进行查找得到对应的数据的地址然后再到数据表中根据地址快速的获取数据记录避免全表扫描索引分类主键索引在数据表的主键字段创建的索引这个字段必须被修饰每张表只能有一个主键唯一索引在数据表中的唯一列创建的索引此列的所有值只能出现一次可以为普通索引在普通字段上创建的索引没有唯一性的限制组合索引两个及以上字段联合起来创建的索引说明在创建数据表时将字段声明为主键添加主键约束会自动在主键字段创建主键索引在创建数据表时将字段声明为唯一键添加唯一约束会自动在唯一字段创建唯一索引创建索引创建唯一索引创建唯一索引的列的值不能重复索引名表名列名创建普通索引不要求创建索引的列的值的唯一性索引名表名列名创建组合索引索引名表名列名列名全文索引了解即可版本新增的索引可以通过此索引进行全文检索操作因为全文检索不支持中文因此这个全文索引不被开发者关注在应用开发中通常是通过搜索引擎数据库中间件实现全文检索索引名表名字段名查看索引查询索引表名查询数据表的索引表名通过创建表的语句查看索引表名删除索引删除索引索引是建立在表的字段上的不同的表中可能会出现相同名称的索引因此删除索引时需要指定表名索引名表名索引的使用索引创建完成之后无需调用当根据创建索引的列进行数据查询的时候会自动使用索引组合索引需要根据创建索引的所有字段进行查询时触发例如在命令行窗口中可以查看查询语句的查询规划索引的使用总结优点索引大大降低了数据库服务器在执行查询操作时扫描的数据量提高查询效率索引可以避免服务器排序将随机变成顺序缺点索引是根据数据表列的创建的当数据表中数据发生操作时索引页需要更新索引文件也会占用磁盘空间注意事项数据表中数据不多时全表扫面可能更快不要使用索引数据量大但是操作很频繁时不建议使用索引不要在数据重复度高的列上创建索引性别创建索引之后要注意查询语句的编写避免索引失效',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-11-29 00:26:24',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Johnny的空间站" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://i.mji.rip/2025/11/25/1c708cfe708256c27d45527ab213aa00.jpeg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">代码托管</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/" title="GitHub"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/25/9a3038ba0b7d4515df5c663d8a6a2469.png" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/" title="Gitee"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/25/b6e0c3428fd3783d83d14960fbbb57a0.png" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://tool.lu/" title="在线工具"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/30/472ebcada7a3e883391c21028c7112eb.png" alt="在线工具"/><span class="back-menu-item-text">在线工具</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://2925.com/" title="2529邮箱"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/25/73a5a6b561d3f82301e726a911d9add3.png" alt="2529邮箱"/><span class="back-menu-item-text">2529邮箱</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.ip.cn/" title="IP地址查询"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/30/ac05acdf53e09f62c657b7cba766905a.png" alt="IP地址查询"/><span class="back-menu-item-text">IP地址查询</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://otp.landian.vip/zh-cn/" title="Office Tool Plus"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/30/8b1aad9e91d6b746141420287f98234d.png" alt="Office Tool Plus"/><span class="back-menu-item-text">Office Tool Plus</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.processon.com/" title="ProcessOn"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/30/a9cccc5064d769ef4590035207b6cb01.png" alt="ProcessOn"/><span class="back-menu-item-text">ProcessOn</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://mjj.today/" title="图床"><img class="back-menu-item-icon" src="https://i.mji.rip/2025/11/25/07fd4c34a272fa061f507cf5534d2dad.png" alt="图床"/><span class="back-menu-item-text">图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Johnny的空间站</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 文章列表</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 全部分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 全部标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=7784481513&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 留言板</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://i.mji.rip/2025/11/25/4ace5945b5c9ad95d20b0e358431eec6.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://i.mji.rip/2025/11/25/4ace5945b5c9ad95d20b0e358431eec6.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://i.mji.rip/2025/11/25/2f9f7712d93dfbf45033d2b86243fbb3.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://i.mji.rip/2025/11/25/2f9f7712d93dfbf45033d2b86243fbb3.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">音乐</div><span class="author-content-item-title">灵魂的碰撞💥</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url">数据库</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>教程</span></a><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>数据库</span></a><a class="article-meta__tags" href="/tags/MySQL/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>MySQL</span></a><a class="article-meta__tags" href="/tags/RDBMS/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>RDBMS</span></a></span></div></div><h1 class="post-title" itemprop="name headline">MySQL教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-10-11T16:00:00.000Z" title="发表于 2024-10-12 00:00:00">2024-10-12</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-11-28T16:26:24.934Z" title="更新于 2025-11-29 00:26:24">2025-11-29</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">10.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/b9a6/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/../images/MySQL%E6%95%99%E7%A8%8B/cover.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://chenhaonan.dpdns.org/posts/b9a6/"><header><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url">数据库</a><a href="/tags/%E6%95%99%E7%A8%8B/" tabindex="-1" itemprop="url">教程</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" tabindex="-1" itemprop="url">数据库</a><a href="/tags/MySQL/" tabindex="-1" itemprop="url">MySQL</a><a href="/tags/RDBMS/" tabindex="-1" itemprop="url">RDBMS</a><h1 id="CrawlerTitle" itemprop="name headline">MySQL教程</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Mr.Chen</span><time itemprop="dateCreated datePublished" datetime="2024-10-11T16:00:00.000Z" title="发表于 2024-10-12 00:00:00">2024-10-12</time><time itemprop="dateCreated datePublished" datetime="2025-11-28T16:26:24.934Z" title="更新于 2025-11-29 00:26:24">2025-11-29</time></header><h2 id="一、数据库相关概念"><a href="#一、数据库相关概念" class="headerlink" title="一、数据库相关概念"></a>一、数据库相关概念</h2><h3 id="1-1-数据库"><a href="#1-1-数据库" class="headerlink" title="1.1 数据库"></a>1.1 数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.数据库即存储数据的仓库，数据是有组织的存储</span><br><span class="line">2.英文：DataBase,简称：DB</span><br></pre></td></tr></table></figure>

<h3 id="1-2-数据库软件"><a href="#1-2-数据库软件" class="headerlink" title="1.2 数据库软件"></a>1.2 数据库软件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.数据库软件即管理数据库的软件</span><br><span class="line">2.英文：DataBase Management System,简称：DBMS</span><br></pre></td></tr></table></figure>

<h3 id="1-3-SQL"><a href="#1-3-SQL" class="headerlink" title="1.3 SQL"></a>1.3 SQL</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.英文：Structured Query Langeage,简称：SQL,结构化查询语言</span><br><span class="line">2.操作关系型数据库的编程语言</span><br><span class="line">3.定义操作所有关系型数据库的统一标准</span><br></pre></td></tr></table></figure>

<h2 id="二、常见的关系型数据库管理系统"><a href="#二、常见的关系型数据库管理系统" class="headerlink" title="二、常见的关系型数据库管理系统"></a>二、常见的关系型数据库管理系统</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MySQL: 开源免费的中小型数据库</span><br><span class="line">Oracel: 收费的大型数据库</span><br><span class="line">SQL Server: MicroSoft公司收费的的中型数据库</span><br><span class="line">DB2: IBM公司的大型收费数据库</span><br><span class="line">MariaDB: 开源免费的中小型数据库</span><br><span class="line">PostgreSQL: 开源免费的中小型数据库</span><br><span class="line">SQLite: 嵌入式的微型数据库,如作为Android内置数据库</span><br><span class="line">……</span><br></pre></td></tr></table></figure>

<h2 id="三、MySQL数据库"><a href="#三、MySQL数据库" class="headerlink" title="三、MySQL数据库"></a>三、MySQL数据库</h2><h3 id="3-1-安装MySQL"><a href="#3-1-安装MySQL" class="headerlink" title="3.1 安装MySQL"></a>3.1 安装MySQL</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在Centos7中,通过Docker安装MySQL(8.0.27),注：目前学习阶段未对mysql的数据目录做数据卷的处理，删除容器后数据也会消失，因此删除容器前注意备份数据。</span><br><span class="line"></span><br><span class="line">安装步骤如下:</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>拉取镜像</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:8.0.27</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>运行镜像，产生容器</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root --name=mysql mysql</span><br></pre></td></tr></table></figure>

<h3 id="3-2-设置Root账户可远程访问数据库"><a href="#3-2-设置Root账户可远程访问数据库" class="headerlink" title="3.2 设置Root账户可远程访问数据库"></a>3.2 设置Root账户可远程访问数据库</h3><p>在 MySQL 8.0 中，要设置 <code>root</code> 用户可以从远程主机访问，你需要执行几个步骤。以下是如何实现的步骤：</p>
<ol>
<li><strong>登录MySQL</strong></li>
</ol>
<p>首先，你需要以 <code>root</code> 用户身份登录到 MySQL 服务器。这通常是在服务器上本地完成的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<p>输入密码后，你将进入 MySQL 提示符。</p>
<ol start="2">
<li><strong>创建远程 root 用户</strong>（如果还没有的话）</li>
</ol>
<p>默认情况下，MySQL 的 <code>root</code> 用户可能只允许从 <code>localhost</code> 访问。要允许从任何主机访问，你需要为该用户指定一个 ‘%’ 通配符，但这并不安全。建议只允许来自特定主机的连接。但如果你只是想测试或临时允许从任何主机访问，可以这样做：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;YOUR_PASSWORD&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br></pre></td></tr></table></figure>
<p>注意：<code>YOUR_PASSWORD</code> 需要替换为你的密码。出于安全考虑，强烈建议仅为受信任的主机创建用户，而不是使用 ‘%’。</p>
<ol start="3">
<li><strong>刷新权限</strong></li>
</ol>
<p>为了让新的权限设置立即生效，你需要刷新 MySQL 的权限表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>开放3306端口</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=publish --add-port=3306/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<ol start="5">
<li><strong>测试远程连接</strong></li>
</ol>
<p>从远程主机使用 MySQL 客户端工具（如 <code>mysql</code> 命令行工具或任何图形界面工具）尝试连接到 MySQL 服务器。确保使用正确的 IP 地址、端口和凭据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h YOUR_SERVER_IP -u root -p</span><br></pre></td></tr></table></figure>
<p>输入你在步骤 2 中设置的密码。</p>
<p><strong>注意</strong>：允许从远程主机访问 MySQL 的 <code>root</code> 用户可能会带来安全风险。确保你了解这些风险，并仅在必要时采取此操作。在生产环境中，通常建议创建具有适当权限的专用用户来管理远程连接。</p>
<h3 id="3-3-卸载MySQL"><a href="#3-3-卸载MySQL" class="headerlink" title="3.3 卸载MySQL"></a>3.3 卸载MySQL</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过Docker安装的MySQL,卸载十分的方便,卸载MySQL即删除对应的容器，注：目前学习阶段未对mysql的数据目录做数据卷的处理，删除容器后数据也会消失，因此删除容器前注意备份数据。</span><br></pre></td></tr></table></figure>

<p><strong>删除容器的命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> 容器Id</span><br></pre></td></tr></table></figure>

<h3 id="3-4-MySQL的数据模型"><a href="#3-4-MySQL的数据模型" class="headerlink" title="3.4 MySQL的数据模型"></a>3.4 MySQL的数据模型</h3><p><strong>关系型数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">关系型数据库即通过多张能够相互连接的二维表来存储数据的数据库</span><br></pre></td></tr></table></figure>

<p><strong>数据模型</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20240601100207516.png" alt="image-20240601100207516"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">一个MySQL数据库管理系统中可以创建多个数据库,一个数据库中可以创建多张数据表,一个表中可以存放多条数据。</span><br><span class="line"></span><br><span class="line">数据库：文件夹的方式存在</span><br><span class="line">数据表：以fmf结尾的文件</span><br><span class="line">数据：以MY0结尾的文件</span><br></pre></td></tr></table></figure>

<h2 id="四、SQL"><a href="#四、SQL" class="headerlink" title="四、SQL"></a>四、SQL</h2><p>通过SQL，来告诉数据库管理系统做什么操作。<br>根据MySQL的数据模型可以看出,需要<code>通过SQL来操作数据库、数据表、以及数据表中的数据</code>。操作的类型分为：<code>增、删、改、查</code></p>
<h3 id="4-1-SQL通用语法"><a href="#4-1-SQL通用语法" class="headerlink" title="4.1 SQL通用语法"></a>4.1 SQL通用语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.SQL语句可以单行或多行书写,以分号结尾</span><br><span class="line">2.SQL语句不区分大小写,关键字建议使用大写</span><br><span class="line">3.注释：</span><br><span class="line">	-- 单行注释内容</span><br><span class="line">	/* 多行注释内容 */</span><br><span class="line">	# 单行注释内容(MySQL 特有)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-SQL分类"><a href="#4-2-SQL分类" class="headerlink" title="4.2 SQL分类"></a>4.2 SQL分类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DDL: 数据定义语言，用于定义数据库对象: 数据库、表、视图、索引、存储过程等(操作数据库和、数据表、视图、索引、存储过程)</span><br><span class="line">DML: 数据库操作语言，用于对数据库中的表的数据进行增删改的操作(操作表中的数据)</span><br><span class="line">DQL: 数据库查询语言，用于对数据库中的表的数据进行查询操作(操作表中的数据)</span><br><span class="line">DCL: 数据库控制语言，用于定义数据库的访问权限和安全级别(用户、用户权限、事务等操作)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20240601112506390.png" alt="image-20240601112506390"></p>
<h3 id="4-3-DDL"><a href="#4-3-DDL" class="headerlink" title="4.3 DDL"></a>4.3 DDL</h3><h4 id="4-3-1-数据库相关操作"><a href="#4-3-1-数据库相关操作" class="headerlink" title="4.3.1 数据库相关操作"></a>4.3.1 数据库相关操作</h4><p><strong>增加数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 创建数据库</span><br><span class="line"><span class="keyword">create</span> database 数据库名;</span><br><span class="line"># 创建数据库,当指定的数据库不存在时才执行</span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> 数据库名;</span><br><span class="line"># 在创建数据库的同时指定数据库的字符集(数据存储在数据库中采用的编码格式 utf8 gbk)</span><br><span class="line"><span class="keyword">create</span> database 数据库名 <span class="keyword">character set</span> utf8;</span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> 数据库名 <span class="keyword">character set</span> utf8;</span><br></pre></td></tr></table></figure>

<p><strong>删除数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 删除数据库</span><br><span class="line"><span class="keyword">drop</span> database 数据库名;</span><br><span class="line"># 删除数据库,当指定的数据库存在时才执行</span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">exists</span> 数据库名;</span><br></pre></td></tr></table></figure>

<p><strong>修改数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 修改数据库的字符集</span><br><span class="line"><span class="keyword">alter</span> database 数据库名 <span class="keyword">character set</span> utf8;</span><br></pre></td></tr></table></figure>

<p><strong>查询数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 显示当前mysql数据库中的数据库列表</span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"># 查看当前使用的数据库</span><br><span class="line"><span class="keyword">select</span> database();</span><br><span class="line"># 显示指定名称的数据库创建的<span class="keyword">SQL</span>指令</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> database 数据库名; </span><br></pre></td></tr></table></figure>

<p><strong>使用数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名;</span><br></pre></td></tr></table></figure>

<h4 id="4-3-2-数据表相关操作"><a href="#4-3-2-数据表相关操作" class="headerlink" title="4.3.2 数据表相关操作"></a>4.3.2 数据表相关操作</h4><p><strong>增加表</strong></p>
<p><em><strong>注：字段的最后一行尾不能加逗号</strong></em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 创建表</span><br><span class="line"><span class="keyword">create table</span> 表名(</span><br><span class="line">	字段名<span class="number">1</span> 数据类型<span class="number">1</span> [约束] [comment 字段描述],</span><br><span class="line">	字段名<span class="number">2</span> 数据类型<span class="number">2</span> [约束] [comment 字段描述],</span><br><span class="line">	……</span><br><span class="line">	字段名n 数据类型n [约束] [comment 字段描述]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 创建表,当表不存在时才执行</span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> 表名(</span><br><span class="line">	字段名<span class="number">1</span> 数据类型<span class="number">1</span> [约束] [comment 字段描述],</span><br><span class="line">	字段名<span class="number">2</span> 数据类型<span class="number">2</span> [约束] [comment 字段描述],</span><br><span class="line">	……</span><br><span class="line">	字段名n 数据类型n [约束] [comment 字段描述]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>删除表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 删除表</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br><span class="line"># 删除表,当表存在时才执行</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> 表名;</span><br></pre></td></tr></table></figure>

<p><strong>修改表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 修改表名:</span><br><span class="line"><span class="keyword">alter table</span> 表名 rename <span class="keyword">to</span> 新表名;</span><br><span class="line"># 修改表的字符集</span><br><span class="line"><span class="keyword">alter table</span> 表名 <span class="keyword">character set</span> utf8;</span><br><span class="line"># 添加列:</span><br><span class="line"><span class="keyword">alter table</span> 表名 <span class="keyword">add</span> 列名 数据类型 [约束] [comment 字段描述];</span><br><span class="line"># 删除字段:</span><br><span class="line"><span class="keyword">alter table</span> 表名 <span class="keyword">drop</span> 列名;</span><br><span class="line"># 修改列的数据类型:</span><br><span class="line"><span class="keyword">alter table</span> 表名 modify 列名 新的数据类型;</span><br><span class="line"># 修改列的列名和数据类型:</span><br><span class="line"><span class="keyword">alter table</span> 表名 change 列名 新列名 新数据类型</span><br></pre></td></tr></table></figure>

<p><strong>查询表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 查询当前数据库下的所有表的名称:</span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"># 查询表结构：</span><br><span class="line"><span class="keyword">desc</span> 表名称;</span><br></pre></td></tr></table></figure>

<h4 id="4-3-3-数据类型"><a href="#4-3-3-数据类型" class="headerlink" title="4.3.3 数据类型"></a>4.3.3 数据类型</h4><p><strong>数值类型</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>内存空间大小</th>
<th>范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>tinyint</td>
<td>1byte</td>
<td>有符号 -128<del>127, 无符号 0</del>255</td>
<td>特小型整数(年龄)</td>
</tr>
<tr>
<td>smallint</td>
<td>2byte</td>
<td>有符号 -32768<del>32767, 无符号 0</del>65535</td>
<td>小型整数</td>
</tr>
<tr>
<td>mediumint</td>
<td>3byte</td>
<td>有符号 -2^31<del>2^31-1, 无符号 0</del>2^32-1</td>
<td>中型整数</td>
</tr>
<tr>
<td>int&#x2F;integer</td>
<td>4byte</td>
<td></td>
<td>整数</td>
</tr>
<tr>
<td>bigint</td>
<td>8byte</td>
<td></td>
<td>大型整数</td>
</tr>
<tr>
<td>float</td>
<td>4byte</td>
<td></td>
<td>单精度</td>
</tr>
<tr>
<td>double</td>
<td>8byte</td>
<td></td>
<td>双精度</td>
</tr>
<tr>
<td>decimal</td>
<td>一般情况: 第一个参数+2</td>
<td></td>
<td>decimal(10,2),表示数值一共10为位，小数位有2位</td>
</tr>
</tbody></table>
<p><strong>字符串类型</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在数据库中存储图片或者视频音频等内容，一般是存储，文件在服务器上的路径，当然如</span><br><span class="line">果非要存储就需要将图片等数据转成二进制进行存储，所以blob类型是可以存储所有类型的，但</span><br><span class="line">是前提是需要转换成二进制，所以此类型用的很少。</span><br><span class="line"></span><br><span class="line">longtext类型一般用于varchar类型储存不下的时候。</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>类型</th>
<th>字符长度</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>char</td>
<td>0~255字节</td>
<td>定长字符串,最多可以存储255个字符;当我们指定数据表字段为char(n)时,此列中的数据最长为n,如果添加的数据少于n,则补’\u0000’至n长度</td>
</tr>
<tr>
<td>varchar</td>
<td>0~65535字节</td>
<td>可变长度字符串,此类型的列最大长度为65535</td>
</tr>
<tr>
<td>tinyblob</td>
<td>0~255字节</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>blob</td>
<td>0~65535字节</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>mediumblob</td>
<td>0~1677215字节</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>longblob</td>
<td>0~4294967295字节</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>tinytext</td>
<td>0~255字节</td>
<td>文本数据(字符串)</td>
</tr>
<tr>
<td>text</td>
<td>0~65535字节</td>
<td>文本数据(字符串)</td>
</tr>
<tr>
<td>mediumtext</td>
<td>0~1677215字节</td>
<td>文本数据(字符串)</td>
</tr>
<tr>
<td>longtext</td>
<td>0~4294967295字节</td>
<td>文本数据(字符串)</td>
</tr>
</tbody></table>
<p><strong>日期类型</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>格式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>date</td>
<td>yyyy-MM-dd</td>
<td>日期，只存储年月日</td>
</tr>
<tr>
<td>time</td>
<td>HH:mm:ss</td>
<td>时间，只存储时分秒</td>
</tr>
<tr>
<td>datetime</td>
<td>yyyy-MM-dd HH:mm:ss</td>
<td>日期+时间，存储年月日时分秒</td>
</tr>
<tr>
<td>year</td>
<td>yyyy</td>
<td>年份</td>
</tr>
<tr>
<td>timestamp</td>
<td>时间戳</td>
<td>日期+时间 (时间戳)</td>
</tr>
</tbody></table>
<h3 id="4-4-DML"><a href="#4-4-DML" class="headerlink" title="4.4 DML"></a>4.4 DML</h3><h4 id="4-4-1-增加数据"><a href="#4-4-1-增加数据" class="headerlink" title="4.4.1 增加数据"></a>4.4.1 增加数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> 表名(列名<span class="number">1</span>,列名<span class="number">2</span>,列名<span class="number">3</span>,……) <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,……)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> 表名 <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,……)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> 表名(列名<span class="number">1</span>,列名<span class="number">2</span>,列名<span class="number">3</span>,……) <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,……),(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,……)……;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> 表名 <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,……),(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,……),</span><br></pre></td></tr></table></figure>

<h4 id="4-4-2-删除数据"><a href="#4-4-2-删除数据" class="headerlink" title="4.4.2 删除数据"></a>4.4.2 删除数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span> 条件]</span><br></pre></td></tr></table></figure>

<h4 id="4-4-3-修改数据"><a href="#4-4-3-修改数据" class="headerlink" title="4.4.3 修改数据"></a>4.4.3 修改数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,列名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,…… [<span class="keyword">where</span> 条件]</span><br></pre></td></tr></table></figure>

<h3 id="4-5-DQL"><a href="#4-5-DQL" class="headerlink" title="4.5 DQL"></a>4.5 DQL</h3><p><strong>基本语法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">select </span><br><span class="line">	字段列表</span><br><span class="line">from </span><br><span class="line">	表名列表</span><br><span class="line">where</span><br><span class="line">	条件列表</span><br><span class="line">group by </span><br><span class="line">	分支字段列表</span><br><span class="line">having</span><br><span class="line">	分组后的条件列表</span><br><span class="line">order by </span><br><span class="line">	排序字段列表</span><br><span class="line">limit </span><br><span class="line">	分页限定</span><br></pre></td></tr></table></figure>

<p><strong>查询分类</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">基础查询</span><br><span class="line">条件查询(where)</span><br><span class="line">分组查询(group by)</span><br><span class="line">排序查询(order by)</span><br><span class="line">分页查询(limit)</span><br></pre></td></tr></table></figure>

<h4 id="4-5-1-基础查询"><a href="#4-5-1-基础查询" class="headerlink" title="4.5.1 基础查询"></a>4.5.1 基础查询</h4><p><strong>格式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from 表名</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名</span><br></pre></td></tr></table></figure>

<p><strong>去除重复记录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct 字段列表 from 表名</span><br></pre></td></tr></table></figure>

<p><strong>起别名</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select 字段 as 字段别名 from 表名</span><br><span class="line">select 字段 字段别名 from 表名</span><br></pre></td></tr></table></figure>

<h4 id="4-5-2-条件查询"><a href="#4-5-2-条件查询" class="headerlink" title="4.5.2 条件查询"></a>4.5.2 条件查询</h4><p><strong>格式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from 表名 where 条件列表</span><br></pre></td></tr></table></figure>

<p><strong>条件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&lt;</span><br><span class="line">=</span><br><span class="line">&gt;=</span><br><span class="line">&lt;=</span><br><span class="line">!=或&lt;&gt;</span><br><span class="line">between …… and ……</span><br><span class="line">in(……)</span><br><span class="line">like </span><br><span class="line">is null</span><br><span class="line">is not null</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">and</span><br><span class="line">or</span><br><span class="line">not</span><br></pre></td></tr></table></figure>

<h4 id="4-5-3-分组查询"><a href="#4-5-3-分组查询" class="headerlink" title="4.5.3 分组查询"></a>4.5.3 分组查询</h4><p><strong>聚合函数</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20240601131353025.png" alt="image-20240601131353025"></p>
<p><strong>格式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from 表名 [where 条件列表] group by 分组字段名 [having 分组后的过滤条件]</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">分组后查询的字段为 聚合函数和分组字段,查询其他字段无任何意义</span><br></pre></td></tr></table></figure>

<p><strong>where与having的区别</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.执行时机不一样: where是在分组之前进行限定,不满足where条件的数据,不参与分组,而having是分组之后对结果进行过滤</span><br><span class="line">2.判断条件不一样: where不能对聚合函数进行判断,having可以</span><br><span class="line"></span><br><span class="line">执行顺序: where &gt; 聚合函数 &gt; having</span><br></pre></td></tr></table></figure>

<h4 id="4-5-4-排序查询"><a href="#4-5-4-排序查询" class="headerlink" title="4.5.4 排序查询"></a>4.5.4 排序查询</h4><p><strong>格式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from 表名 order by 排序字段名1 [排序方式1],排序字段名2 [排序方式2]……</span><br></pre></td></tr></table></figure>

<p><strong>排序方式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">asc : 升序(默认值)</span><br><span class="line">desc : 降序</span><br><span class="line">注：如果有多个排序条件,当前面的条件值一样时,才会根据第二条件排序</span><br></pre></td></tr></table></figure>

<h4 id="4-5-5-分页查询"><a href="#4-5-5-分页查询" class="headerlink" title="4.5.5 分页查询"></a>4.5.5 分页查询</h4><p><strong>格式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from 表名 limit 起始索引,查询条目数</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">起始索引: 从0开始</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">计算公式: 起始索引=(当前页码-1)*每页显示的条数</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">分页查询limit是MySQL数据库的方言</span><br><span class="line">Oracel分页查询使用rownumber</span><br><span class="line">SQL SERVER分页查询使用top</span><br></pre></td></tr></table></figure>

<h2 id="五、约束"><a href="#五、约束" class="headerlink" title="五、约束"></a>五、约束</h2><h3 id="5-1-约束的概念"><a href="#5-1-约束的概念" class="headerlink" title="5.1 约束的概念"></a>5.1 约束的概念</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">约束是作用于表中列上的规则,用于现状加入表中的数据</span><br><span class="line">约束的存在保证了数据库中的数据的完整性、有效性、正确性</span><br></pre></td></tr></table></figure>

<h3 id="5-2-约束分类"><a href="#5-2-约束分类" class="headerlink" title="5.2 约束分类"></a>5.2 约束分类</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20240601143403572.png" alt="image-20240601143403572"></p>
<p><strong>注：MySQL不支持检查约束</strong></p>
<h3 id="5-3-自增长"><a href="#5-3-自增长" class="headerlink" title="5.3 自增长"></a>5.3 自增长</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">条件: 当列是数字类型的时候可以加自增长</span><br><span class="line"></span><br><span class="line">auto_increment</span><br></pre></td></tr></table></figure>

<h3 id="5-4-添加约束-非外键约束"><a href="#5-4-添加约束-非外键约束" class="headerlink" title="5.4 添加约束(非外键约束)"></a>5.4 添加约束(非外键约束)</h3><h4 id="5-4-1-创建表的时候添加"><a href="#5-4-1-创建表的时候添加" class="headerlink" title="5.4.1 创建表的时候添加"></a>5.4.1 创建表的时候添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	列名 数据类型 约束,</span><br><span class="line">	列名 数据类型 约束,</span><br><span class="line">	……</span><br><span class="line">	列名 数据类型 约束</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="5-4-2-创建完表之后添加"><a href="#5-4-2-创建完表之后添加" class="headerlink" title="5.4.2 创建完表之后添加"></a>5.4.2 创建完表之后添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 modify 字段 数据类型 约束;</span><br></pre></td></tr></table></figure>

<h3 id="5-5-删除约束-非外键约束"><a href="#5-5-删除约束-非外键约束" class="headerlink" title="5.5 删除约束(非外键约束)"></a>5.5 删除约束(非外键约束)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 modify 字段 数据类型;</span><br></pre></td></tr></table></figure>

<h3 id="5-6-添加外键约束"><a href="#5-6-添加外键约束" class="headerlink" title="5.6 添加外键约束"></a>5.6 添加外键约束</h3><h4 id="5-6-1-创建表的时候添加"><a href="#5-6-1-创建表的时候添加" class="headerlink" title="5.6.1 创建表的时候添加"></a>5.6.1 创建表的时候添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	列名 数据类型,</span><br><span class="line">	列名 数据类型,</span><br><span class="line">	……</span><br><span class="line">	列名 数据类型,</span><br><span class="line">	constraint 外键名称 foreign key(外键列名) references 主表(主表列名)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="5-6-2-创建完表之后添加"><a href="#5-6-2-创建完表之后添加" class="headerlink" title="5.6.2 创建完表之后添加"></a>5.6.2 创建完表之后添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add constraint 外键名称 foreign key(外键列名) references 主表(主表列名)</span><br></pre></td></tr></table></figure>



<h3 id="5-7-删除外键约束"><a href="#5-7-删除外键约束" class="headerlink" title="5.7 删除外键约束"></a>5.7 删除外键约束</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 drop foreign key 外键名称</span><br></pre></td></tr></table></figure>

<h2 id="六、数据库设计"><a href="#六、数据库设计" class="headerlink" title="六、数据库设计"></a>六、数据库设计</h2><h3 id="6-1-数据库设计的概念"><a href="#6-1-数据库设计的概念" class="headerlink" title="6.1 数据库设计的概念"></a>6.1 数据库设计的概念</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库设计即针对某个系统的需求进行设计，确定需要哪些表、表中有那些字段以及表于表之间的关系</span><br></pre></td></tr></table></figure>

<h3 id="6-2-表与表之间的关系"><a href="#6-2-表与表之间的关系" class="headerlink" title="6.2 表与表之间的关系"></a>6.2 表与表之间的关系</h3><h4 id="6-2-1-一对一"><a href="#6-2-1-一对一" class="headerlink" title="6.2.1 一对一"></a>6.2.1 一对一</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">一对一</span><br><span class="line">	如：人与身份证号</span><br><span class="line">	一个人拥有一个身份证号,一个身份证号对应一个人</span><br><span class="line">实现方式：在任意一方加外键，指向另一方的主键,且在外键字段上添加 唯一约束</span><br><span class="line"></span><br><span class="line">一对一的表关系一般用于表的拆分，将常用的字段放在一张表,不常用的字段放在另一张表,用于提升查询性能</span><br></pre></td></tr></table></figure>

<h4 id="6-2-2-一对多"><a href="#6-2-2-一对多" class="headerlink" title="6.2.2 一对多"></a>6.2.2 一对多</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一对多</span><br><span class="line">	如：部门和员工</span><br><span class="line">	一个部门对应多个员工,一个员工对应一个部门</span><br><span class="line">实现方式：在多的一方建立外键,指向一的一方的主键</span><br></pre></td></tr></table></figure>

<h4 id="6-2-3-多对多"><a href="#6-2-3-多对多" class="headerlink" title="6.2.3 多对多"></a>6.2.3 多对多</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">多对多：</span><br><span class="line">	如：订单和商品</span><br><span class="line">	一个订单可以包含多个商品,一种商品可以属于多个订单</span><br><span class="line">实现方式：建立第三种中间表,中间表至少包含两个外键,分别关联两方的主键</span><br></pre></td></tr></table></figure>

<h2 id="七、多表查询"><a href="#七、多表查询" class="headerlink" title="七、多表查询"></a>七、多表查询</h2><h3 id="7-1-笛卡尔积"><a href="#7-1-笛卡尔积" class="headerlink" title="7.1 笛卡尔积"></a>7.1 笛卡尔积</h3><p>笛卡尔积，取A、B集合所有组合情况，最终查询出来的数据条数为多张表的分别记录条数的乘积,这种方式的查询会存在许多无效的数据,因此通常不会使用下面的查询方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from A,B……</span><br></pre></td></tr></table></figure>

<h3 id="7-2-连接查询"><a href="#7-2-连接查询" class="headerlink" title="7.2 连接查询"></a>7.2 连接查询</h3><h4 id="7-2-1-内连接"><a href="#7-2-1-内连接" class="headerlink" title="7.2.1 内连接"></a>7.2.1 内连接</h4><p><code>内连接</code>：相当于查询A、B交集数据</p>
<p><strong>隐式内连接</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from A,B where A.id = B.id</span><br></pre></td></tr></table></figure>

<p><strong>显示内连接</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from A [inner] join B on A.id = B.id</span><br></pre></td></tr></table></figure>

<h4 id="7-2-2-外连接"><a href="#7-2-2-外连接" class="headerlink" title="7.2.2 外连接"></a>7.2.2 外连接</h4><p><strong>左外连接</strong></p>
<p><code>左外连接</code>：相当于查询A表所有数据和交集部分数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from A left [outer] join B on A.id = B.id</span><br></pre></td></tr></table></figure>

<p><strong>右外连接</strong></p>
<p><code>左外连接</code>：相当于查询B表所有数据和交集部分数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from A right [outer] join B on A.id = B.id</span><br></pre></td></tr></table></figure>

<h3 id="7-3-子查询"><a href="#7-3-子查询" class="headerlink" title="7.3 子查询"></a>7.3 子查询</h3><p><code>子查询</code>：查询中嵌套查询,嵌套查询为子查询。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">子查询根据查询结果不同，作用不同，可分为：</span><br><span class="line">单行单列</span><br><span class="line">多行单列</span><br><span class="line">多行多列</span><br></pre></td></tr></table></figure>

<h4 id="7-3-1-单行单列"><a href="#7-3-1-单行单列" class="headerlink" title="7.3.1 单行单列"></a>7.3.1 单行单列</h4><p><code>单行单列</code>: 作为条件值,使用&gt;、&#x3D;、&lt;等进行条件判断</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from 表 where 字段名 = (子查询)</span><br></pre></td></tr></table></figure>

<h4 id="7-3-2-多行单列"><a href="#7-3-2-多行单列" class="headerlink" title="7.3.2 多行单列"></a>7.3.2 多行单列</h4><p><code>多行单列</code>: 作为条件值，使用in关键字进行条件判断</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from 表 where 字段名 in (子查询)</span><br></pre></td></tr></table></figure>

<h4 id="7-3-3-多行多列"><a href="#7-3-3-多行多列" class="headerlink" title="7.3.3 多行多列"></a>7.3.3 多行多列</h4><p><code>多行多列</code>: 作为虚拟表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 from (子查询) where 条件</span><br></pre></td></tr></table></figure>

<h2 id="八、事务"><a href="#八、事务" class="headerlink" title="八、事务"></a>八、事务</h2><h3 id="8-1-事务简介"><a href="#8-1-事务简介" class="headerlink" title="8.1 事务简介"></a>8.1 事务简介</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据库的事务(Transaction)是一种机制,一个操作序列,包含了一组数据库操作命令。</span><br><span class="line">事务把所有的命令看作一个整体一起向系统提交或撤销操作请求，即这组数据库命令要么同时成功，要么同时失败。</span><br><span class="line">事务是一个不可分割是工作逻辑单元</span><br></pre></td></tr></table></figure>

<h3 id="8-2-事务操作"><a href="#8-2-事务操作" class="headerlink" title="8.2 事务操作"></a>8.2 事务操作</h3><p><strong>开启事务</strong></p>
<p><code>开启事务</code>：即告诉系统，下面的数据库操作命令为临时的操作，不会真正的操作数据库中的数据，直到提交事务时才真正的对数据库进行操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br><span class="line">或</span><br><span class="line">begin;</span><br></pre></td></tr></table></figure>

<p><strong>提交事务</strong></p>
<p><code>提交事务</code>：即告诉系统，所有的临时操作已经编写完成,可以按照临时操作对数据库中的数据进行真正的操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commit;</span><br></pre></td></tr></table></figure>

<p><strong>回滚事务</strong></p>
<p><code>回滚事务</code>:即出现异常时,告诉系统撤销临时操作,回到开启事务前的状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-事务四大特性"><a href="#8-3-事务四大特性" class="headerlink" title="8.3 事务四大特性"></a>8.3 事务四大特性</h3><p><code>原子性 (Atomicity)</code>: 事务是不可分割的最小操作单元,要么同时成功,要么同时失败</p>
<p><code>一致性(Consistency)</code>: 事务完成时,必须使所有的数据都保持一致状态</p>
<p><code>隔离性(Isolation)</code>: 多个事务之间相互隔离，操作的可见性</p>
<p><code>持久性(Durability)</code>: 事务一旦提交或回滚,它对数据库中的数据的改变就是永久的 </p>
<h3 id="8-4-MySQL事务的提交方式"><a href="#8-4-MySQL事务的提交方式" class="headerlink" title="8.4 MySQL事务的提交方式"></a>8.4 MySQL事务的提交方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select @@autocommit</span><br><span class="line"></span><br><span class="line">查询结果为1,表示自动提交,MySQL事务默认自动提交</span><br><span class="line">查询结果为0,表示需手动提交</span><br><span class="line"></span><br><span class="line">修改事务的提交方式:</span><br><span class="line">	set @@autocommit = 1;</span><br><span class="line">	set @@autocommit = 0;</span><br></pre></td></tr></table></figure>

<h3 id="8-5-事务的隔离级别"><a href="#8-5-事务的隔离级别" class="headerlink" title="8.5 事务的隔离级别"></a>8.5 事务的隔离级别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库允许多个事务并行，多个事务之间是隔离的、相互独立的；如果事务之间不相互隔离并且操作同一数据时，可能会导致数据的一致性被破坏。</span><br></pre></td></tr></table></figure>

<h4 id="8-5-1-读未提交-read-uncommitted"><a href="#8-5-1-读未提交-read-uncommitted" class="headerlink" title="8.5.1  读未提交(read uncommitted)"></a>8.5.1  读未提交(read uncommitted)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T2可以读取T1执行但未提交的数据；可能会导致出现脏读;</span><br><span class="line">脏读,一个事务读取到了另一个事务中未提交的数据</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20241013150847083.png" alt="image-20241013150847083"></p>
<h4 id="8-5-2-读已提交-read-committed"><a href="#8-5-2-读已提交-read-committed" class="headerlink" title="8.5.2 读已提交(read committed)"></a>8.5.2 读已提交(read committed)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">T2只能读取T1已经提交的数据;避免了脏读,但可能会导致不可重复度(虚读)</span><br><span class="line">不可重复度(虚读): 在同一个事务中，两次查询操作读取到数据不一致</span><br><span class="line">例如：T2进行第一次查询之后在第二次查询之前,T1修改并提交了数据,T2进行第二次查询时读取到的数据和第一次查询读取到数据不一致。</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20241013151027691.png" alt="image-20241013151027691"></p>
<h4 id="8-5-3-可重复读-repeatable-read"><a href="#8-5-3-可重复读-repeatable-read" class="headerlink" title="8.5.3 可重复读(repeatable read)"></a>8.5.3 可重复读(repeatable read)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T2执行第一次查询之后,在事务结束之前其他事务不能修改对应的数;避免了不可重复读(虚读)，但可能会导致幻读</span><br><span class="line">幻读,T2对数据表中的数据进行修改然后查询,在查询之前T1向数据表中新增了一条数据,就导致T2以为修改了所有数据,但却查询出了与修改不一致的数据（T1事务新增的数据）</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20241013151201835.png" alt="image-20241013151201835"></p>
<h4 id="8-5-4-串行化-serializable"><a href="#8-5-4-串行化-serializable" class="headerlink" title="8.5.4 串行化(serializable)"></a>8.5.4 串行化(serializable)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">同时只允许一个事务对数据表进行操作；避免了脏读、虚读、幻读问题</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20241013151244042.png" alt="image-20241013151244042"></p>
<h4 id="8-5-5-设置数据库事务隔离级别"><a href="#8-5-5-设置数据库事务隔离级别" class="headerlink" title="8.5.5 设置数据库事务隔离级别"></a>8.5.5 设置数据库事务隔离级别</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">我们可以通过设置数据库默认的事务隔离级别来控制事务之间的隔离性;</span><br><span class="line">也可以通过客户端与数据库连接设置来设置事务间的隔离性（在应用程序中设置--Spring）；</span><br><span class="line">MySQL数据库默认的隔离级别为 可重复读</span><br></pre></td></tr></table></figure>

<ul>
<li><p>查看MySQL数据库默认的隔离级别</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在MySQL8.0.3 之前</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@tx_isolation</span>;</span><br><span class="line"><span class="comment">-- 在MySQL8.0.3 之后</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@transaction_isolation</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置MySQL默认隔离级别</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> session transaction isolation level 隔离级别;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="九、存储过程"><a href="#九、存储过程" class="headerlink" title="九、存储过程"></a>九、存储过程</h2><h3 id="9-1-SQL指令执行过程"><a href="#9-1-SQL指令执行过程" class="headerlink" title="9.1 SQL指令执行过程"></a>9.1 SQL指令执行过程</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20241011214033100.png" alt="image-20241011214033100"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">从SQL执行执行的流程中我们分析存在的问题：</span><br><span class="line">1. 如果我们需要重复多次执行相同的SQL，SQL指令都需要通过连接传递到MySQL，并且需要</span><br><span class="line">经过编译和执行的步骤；</span><br><span class="line">2. 如果我们需要连续执行多个SQL指令，并且第二个SQL指令需要使用第一个SQL指令执行的</span><br><span class="line">结果作为参数；</span><br></pre></td></tr></table></figure>

<h3 id="9-2-存储过程介绍"><a href="#9-2-存储过程介绍" class="headerlink" title="9.2 存储过程介绍"></a>9.2 存储过程介绍</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20241011214142677.png" alt="image-20241011214142677"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">存储过程：</span><br><span class="line">将能够完成特定功能的SQL指令进行封装（SQL指令集）,编译之后存储在数据库服务器</span><br><span class="line">上，并且为之取一个名字，客户端可以通过名字直接调用这个SQL指令集，获取执行结果。</span><br></pre></td></tr></table></figure>

<h3 id="9-3-存储过程优缺点分析"><a href="#9-3-存储过程优缺点分析" class="headerlink" title="9.3 存储过程优缺点分析"></a>9.3 存储过程优缺点分析</h3><p><strong>存储过程优点</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. SQL指令无需客户端编写，通过网络传送，可以节省网络开销，同时避免SQL指令在网络传</span><br><span class="line">输过程中被恶意篡改保证安全性；</span><br><span class="line">2. 存储过程经过编译创建并保存在数据库中的，执行过程无需重复的进行编译操作，对SQL指</span><br><span class="line">令的执行过程进行了性能提升；</span><br><span class="line">3. 存储过程中多个SQL指令之间存在逻辑关系，支持流程控制语句（分支、循环），可以实现</span><br><span class="line">更为复杂的业务;</span><br></pre></td></tr></table></figure>

<p><strong>存储过程缺点</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 存储过程是根据不同的数据库进行编译、创建并存储在数据库中；当我们需要切换到其他的</span><br><span class="line">数据库产品时，需要重写编写针对于新数据库的存储过程；</span><br><span class="line">2. 存储过程受限于数据库产品，如果需要高性能的优化会成为一个问题；</span><br><span class="line">3. 在互联网项目中，如果需要数据库的高（连接）并发访问，使用存储过程会增加数据库的连</span><br><span class="line">接执行时间（因为我们将复杂的业务交给了数据库进行处理）</span><br></pre></td></tr></table></figure>

<h3 id="9-4-创建存储过程"><a href="#9-4-创建存储过程" class="headerlink" title="9.4 创建存储过程"></a>9.4 创建存储过程</h3><p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> 存储过程名称([<span class="keyword">IN</span><span class="operator">/</span><span class="keyword">OUT</span> args])</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">      <span class="comment">-- SQL</span></span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个存储过程实现加法运算:</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test1(<span class="keyword">IN</span> a <span class="type">int</span>,<span class="keyword">IN</span> b <span class="type">int</span>,<span class="keyword">OUT</span> c <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">SET</span> c <span class="operator">=</span> a<span class="operator">+</span>b;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="9-5-调用存储过程"><a href="#9-5-调用存储过程" class="headerlink" title="9.5 调用存储过程"></a>9.5 调用存储过程</h3><p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> 存储过程名称(args……)</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="comment">-- 定义变量@m</span></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@m</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">-- 调用存储过程，将3传递给a，将2传递给b，将@m传递给c</span></span><br><span class="line"><span class="keyword">call</span> proc_test1(<span class="number">3</span>,<span class="number">2</span>,<span class="variable">@m</span>);</span><br><span class="line"><span class="comment">-- 显示变量值（dual系统表，无需创建，定义变量的值都会在这里）</span></span><br><span class="line"><span class="keyword">select</span> <span class="variable">@m</span> <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<h3 id="9-6-存储过程中的变量"><a href="#9-6-存储过程中的变量" class="headerlink" title="9.6 存储过程中的变量"></a>9.6 存储过程中的变量</h3><blockquote>
<p>存储过程中的变量分为两种：局部变量 和 用户变量</p>
</blockquote>
<h4 id="9-6-1-定义局部变量"><a href="#9-6-1-定义局部变量" class="headerlink" title="9.6.1 定义局部变量"></a>9.6.1 定义局部变量</h4><p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 局部变量要定义在存储过程中，而且必须定义在存储过程开始</span></span><br><span class="line"><span class="keyword">declare</span> 参数名 参数类型 [<span class="keyword">default</span> 默认值];</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test2(<span class="keyword">IN</span> a <span class="type">int</span>,<span class="keyword">OUT</span> r <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"> <span class="keyword">declare</span> x <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span>;  <span class="comment">-- 定义x  int类型，默认值为0</span></span><br><span class="line"> <span class="keyword">declare</span> y <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;  <span class="comment">-- 定义y</span></span><br><span class="line"> <span class="keyword">set</span> x <span class="operator">=</span> a<span class="operator">*</span>a;</span><br><span class="line"> <span class="keyword">set</span> y <span class="operator">=</span> a<span class="operator">/</span><span class="number">2</span>; </span><br><span class="line"> <span class="keyword">set</span> r <span class="operator">=</span> x<span class="operator">+</span>y;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h4 id="9-6-2-定义用户变量"><a href="#9-6-2-定义用户变量" class="headerlink" title="9.6.2 定义用户变量"></a>9.6.2 定义用户变量</h4><blockquote>
<p>用户变量：相当于全局变量，定义的用户变量可以通过 select @attrName from dual 进行查询</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 用户变量会存储在mysql数据库的数据字典中（dual）</span></span><br><span class="line"><span class="comment">-- 用户变量定义使用set关键字直接定义，变量名要以@开头</span></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@n</span><span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h4 id="9-6-3-给变量赋值"><a href="#9-6-3-给变量赋值" class="headerlink" title="9.6.3 给变量赋值"></a>9.6.3 给变量赋值</h4><blockquote>
<p>无论是局部变量还是用户变量，都是使用 set 关键字修改值</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> 变量名<span class="operator">=</span>值</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set @n=1;</span><br><span class="line">call proc_test2(6,@n);</span><br><span class="line">select @n from dual;</span><br></pre></td></tr></table></figure>

<h4 id="9-6-4-将查询结果赋值给变量"><a href="#9-6-4-将查询结果赋值给变量" class="headerlink" title="9.6.4 将查询结果赋值给变量"></a>9.6.4 将查询结果赋值给变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在存储过程中使用select..into..给变量赋值</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询学生数量</span></span><br><span class="line"><span class="comment">-- 注意在储存过程中使用SQL语句需要将结果赋值给变量，那么就需要使用into关键字来进</span></span><br><span class="line">行赋值</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test3(<span class="keyword">OUT</span> c <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">select</span> <span class="built_in">count</span>(stu_num) <span class="keyword">INTO</span> c <span class="keyword">from</span> students; <span class="comment">-- 将查询到学生数量赋值给c</span></span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">call</span> proc_test3(<span class="variable">@n</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@n</span> <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<h4 id="9-6-5-用户变量使用注意事项"><a href="#9-6-5-用户变量使用注意事项" class="headerlink" title="9.6.5 用户变量使用注意事项"></a>9.6.5 用户变量使用注意事项</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">因为用户变量相当于全局变量，可以在SQL指令以及多个存储过程中共享，在开发中建议尽量少使用用户变量，用户变量过多会导致程序不易理解、难以维护。</span><br></pre></td></tr></table></figure>

<h3 id="9-7-存储过程的参数"><a href="#9-7-存储过程的参数" class="headerlink" title="9.7 存储过程的参数"></a>9.7 存储过程的参数</h3><blockquote>
<p>MySQL存储过程的参数一共有三种：IN  \  OUT  \  INOUT</p>
</blockquote>
<h4 id="9-7-1-IN-输入参数"><a href="#9-7-1-IN-输入参数" class="headerlink" title="9.7.1 IN 输入参数"></a>9.7.1 IN 输入参数</h4><blockquote>
<p>输入参数——在调用存储过程中传递数据给存储过程的参数（在调用的过程必须为具有实际值的 变量 或者  字面值）</p>
</blockquote>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建存储过程：添加学生信息</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test4(<span class="keyword">IN</span> snum <span class="type">char</span>(<span class="number">8</span>),<span class="keyword">IN</span> sname <span class="type">varchar</span>(<span class="number">20</span>), <span class="keyword">IN</span> gender <span class="type">char</span>(<span class="number">2</span>), <span class="keyword">IN</span> age <span class="type">int</span>, <span class="keyword">IN</span> cid <span class="type">int</span>, <span class="keyword">IN</span> remark <span class="type">varchar</span>(<span class="number">255</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">insert into</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark)</span><br><span class="line">    <span class="keyword">values</span>(snum,sname,gender,age,cid,remark);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">call</span> proc_test4(<span class="string">&#x27;20220108&#x27;</span>,<span class="string">&#x27;小丽&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">1</span>,<span class="string">&#x27;aaa&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="9-7-2-OUT-输出参数"><a href="#9-7-2-OUT-输出参数" class="headerlink" title="9.7.2 OUT 输出参数"></a>9.7.2 OUT 输出参数</h4><blockquote>
<p>输出参数——将存储过程中产生的数据返回给过程调用者，相当于Java方法的返回值，但不同的是一个存储过程可以有多个输出参数</p>
</blockquote>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建存储过程，根据学生学号，查询学生姓名</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test5(<span class="keyword">IN</span> snum <span class="type">char</span>(<span class="number">8</span>),<span class="keyword">OUT</span> sname <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">select</span> stu_name <span class="keyword">INTO</span> sname <span class="keyword">from</span> students <span class="keyword">where</span> stu_num<span class="operator">=</span>snum;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@name</span><span class="operator">=</span><span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">call</span> proc_test5(<span class="string">&#x27;20220107&#x27;</span>,<span class="variable">@name</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@name</span> <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<h4 id="9-7-3-INOUT-输入输出参数"><a href="#9-7-3-INOUT-输入输出参数" class="headerlink" title="9.7.3 INOUT 输入输出参数"></a>9.7.3 INOUT 输入输出参数</h4><blockquote>
<p>输入输出参数——该类型的参数既是输入参数也是输入参数。注意：此方式不建议使用，一般我们输入就用 IN 输出就用OUT，此参数代码可读性低，容易混淆。</p>
</blockquote>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test6(<span class="keyword">INOUT</span> str <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">select</span> stu_name <span class="keyword">INTO</span> str <span class="keyword">from</span> students <span class="keyword">where</span> stu_num<span class="operator">=</span>str;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@name</span><span class="operator">=</span><span class="string">&#x27;20220108&#x27;</span>;</span><br><span class="line"><span class="keyword">call</span> proc_test6(<span class="variable">@name</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@name</span> <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<h3 id="9-8-存储过程中的流程控制"><a href="#9-8-存储过程中的流程控制" class="headerlink" title="9.8 存储过程中的流程控制"></a>9.8 存储过程中的流程控制</h3><h4 id="9-8-1-分支语句"><a href="#9-8-1-分支语句" class="headerlink" title="9.8.1 分支语句"></a>9.8.1 分支语句</h4><ul>
<li>if-then-else</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单分支：如果条件成立，则执行SQL</span></span><br><span class="line">if conditions <span class="keyword">then</span></span><br><span class="line">    <span class="comment">-- SQL</span></span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"><span class="comment">-- 如果参数a的值为1，则添加一条班级信息</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test7(<span class="keyword">IN</span> a <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">     if a<span class="operator">=</span><span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">insert into</span> classes(class_name,remark) <span class="keyword">values</span>(<span class="string">&#x27;Java2209&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">     <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 双分支：如果条件成立则执行SQL1，否则执行SQL2</span></span><br><span class="line">if conditions <span class="keyword">then</span></span><br><span class="line">    <span class="comment">-- SQL1</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment">-- SQL2</span></span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"><span class="comment">-- 如果参数a的值为1，则添加一条班级信息；否则添加一条学生信息</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test7(<span class="keyword">IN</span> a <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">     if a<span class="operator">=</span><span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">insert into</span> classes(class_name,remark) <span class="keyword">values</span>(<span class="string">&#x27;Java2209&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">insert into</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark) <span class="keyword">values</span>(<span class="string">&#x27;20220110&#x27;</span>,<span class="string">&#x27;小花&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">19</span>,<span class="number">1</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">     <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>case</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- case</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test8(<span class="keyword">IN</span> a <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">case</span> a</span><br><span class="line">    <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span>  </span><br><span class="line">        <span class="comment">-- SQL1   如果a的值为1  则执行SQL1</span></span><br><span class="line">        <span class="keyword">insert into</span> classes(class_name,remark) <span class="keyword">values</span>(<span class="string">&#x27;Java2210&#x27;</span>,<span class="string">&#x27;wahaha&#x27;</span>);</span><br><span class="line">    <span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">-- SQL2   如果a的值为2  则执行SQL2</span></span><br><span class="line">        <span class="keyword">insert into</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark) <span class="keyword">values</span>(<span class="string">&#x27;20220111&#x27;</span>,<span class="string">&#x27;小刚&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">-- SQL (如果变量的值和所有when的值都不匹配，则执行else中的这个SQL)</span></span><br><span class="line">        <span class="keyword">update</span> students <span class="keyword">set</span> stu_age<span class="operator">=</span><span class="number">18</span> <span class="keyword">where</span> stu_num<span class="operator">=</span><span class="string">&#x27;20220110&#x27;</span>;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h4 id="9-8-2-循环语句"><a href="#9-8-2-循环语句" class="headerlink" title="9.8.2 循环语句"></a>9.8.2 循环语句</h4><ul>
<li>while</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- while</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test9(<span class="keyword">IN</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">declare</span> i <span class="type">int</span>;</span><br><span class="line">    <span class="keyword">set</span> i <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    while i<span class="operator">&lt;</span>num do</span><br><span class="line">            <span class="comment">-- SQL</span></span><br><span class="line">            <span class="keyword">insert into</span> classes(class_name,remark) <span class="keyword">values</span>( CONCAT(<span class="string">&#x27;Java&#x27;</span>,i) </span><br><span class="line">,<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line">            <span class="keyword">set</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> while;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">call</span> proc_test9(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>repeat</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- repeat</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test10(<span class="keyword">IN</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span>;</span><br><span class="line">    <span class="keyword">set</span> i <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    repeat</span><br><span class="line">        <span class="comment">-- SQL</span></span><br><span class="line">        <span class="keyword">insert into</span> classes(class_name,remark) <span class="keyword">values</span>( CONCAT(<span class="string">&#x27;Python&#x27;</span>,i) </span><br><span class="line">,<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">    until i <span class="operator">&gt;</span> num <span class="keyword">end</span> repeat;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">call</span> proc_test10(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>loop</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- loop</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test11(<span class="keyword">IN</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">declare</span> i <span class="type">int</span> ;</span><br><span class="line">     <span class="keyword">set</span> i <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">     myloop:loop</span><br><span class="line">            <span class="comment">-- SQL</span></span><br><span class="line">            <span class="keyword">insert into</span> classes(class_name,remark) <span class="keyword">values</span>( CONCAT(<span class="string">&#x27;HTML&#x27;</span>,i) </span><br><span class="line">,<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line">            <span class="keyword">set</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">            # 结束循环的条件</span><br><span class="line">            if i<span class="operator">=</span>num <span class="keyword">then</span></span><br><span class="line">               # 离开循环</span><br><span class="line">               leave myloop;</span><br><span class="line">            <span class="keyword">end</span> if;</span><br><span class="line">     <span class="keyword">end</span> loop;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">call</span> proc_test11(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<h3 id="9-9-查询存储过程"><a href="#9-9-查询存储过程" class="headerlink" title="9.9 查询存储过程"></a>9.9 查询存储过程</h3><blockquote>
<p>存储过程是属于某个数据库的，也就是说当我们将存储过程创建在某个数据库之后，只能在当前数据库中调用此存储过程。<br>查询存储过程：查询某个数据库中有哪些存储过程</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有存储过程</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">procedure</span>;</span><br><span class="line"><span class="comment">-- 根据数据库名，查询当前数据库中的存储过程</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">procedure</span> status <span class="keyword">where</span> db<span class="operator">=</span><span class="string">&#x27;db_test2&#x27;</span>;</span><br><span class="line"><span class="comment">-- 查询存储过程的创建细节</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">procedure</span> db_test2.proc_test1;</span><br></pre></td></tr></table></figure>

<h3 id="9-10-修改存储过程"><a href="#9-10-修改存储过程" class="headerlink" title="9.10 修改存储过程"></a>9.10 修改存储过程</h3><blockquote>
<p>修改存储过程指的是修改存储过程的特征&#x2F;特性</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">procedure</span> 存储过程名称 特征<span class="number">1</span> [特征<span class="number">2</span> 特征<span class="number">3</span> ....]</span><br></pre></td></tr></table></figure>

<p><strong>存储过程的特征参数：</strong></p>
<ul>
<li><p>CONTAINS SQL  表示子程序包含 SQL 语句，但不包含读或写数据的语句</p>
</li>
<li><p>NO SQL  表示子程序中不包含 SQL 语句</p>
</li>
<li><p>READS SQL DATA  表示子程序中包含读数据的语句</p>
</li>
<li><p>MODIFIES SQL DATA  表示子程序中包含写数据的语句</p>
</li>
<li><p>SQL SECURITY  { DEFINER |INVOKER } 指明谁有权限来执行</p>
</li>
<li><p>DEFINER 表示只有定义者自己才能够执行</p>
</li>
<li><p>INVOKER 表示调用者可以执行</p>
</li>
<li><p>COMMENT ‘string’  表示注释信息</p>
</li>
</ul>
<h3 id="9-11-删除存储过程"><a href="#9-11-删除存储过程" class="headerlink" title="9.11 删除存储过程"></a>9.11 删除存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除存储过程</span></span><br><span class="line"><span class="comment">-- drop 删除数据库中的对象 数据库、数据表、列、存储过程、视图、触发器、索引....</span></span><br><span class="line"><span class="comment">-- delete 删除数据表中的数据</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> 存储过程名称;</span><br></pre></td></tr></table></figure>

<h3 id="9-12-游标"><a href="#9-12-游标" class="headerlink" title="9.12 游标"></a>9.12 游标</h3><blockquote>
<p>问题：如果我们要创建一个存储过程，需要返回查询语句查询到的多条数据，该如何实现呢？</p>
</blockquote>
<h4 id="9-12-1-游标的概念"><a href="#9-12-1-游标的概念" class="headerlink" title="9.12.1 游标的概念"></a>9.12.1 游标的概念</h4><blockquote>
<p>游标可以用来依次取出查询结果集中的每一条数据——逐条读取查询结果集中的记录</p>
</blockquote>
<h4 id="9-12-2-游标使用步骤"><a href="#9-12-2-游标使用步骤" class="headerlink" title="9.12.2 游标使用步骤"></a>9.12.2 游标使用步骤</h4><p><strong>声明游标</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 声明游标语法</span></span><br><span class="line"><span class="keyword">DECLARE</span> 游标名称 <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> select_statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 示例</span></span><br><span class="line"><span class="keyword">declare</span> mycursor <span class="keyword">cursor</span> <span class="keyword">for</span> <span class="keyword">select</span> class_id,class_name <span class="keyword">from</span> classes;</span><br></pre></td></tr></table></figure>

<p><strong>打开游标</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="keyword">open</span> 游标名称;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 示例</span></span><br><span class="line"><span class="keyword">open</span> mycursor;</span><br></pre></td></tr></table></figure>

<p><strong>使用游标</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="comment">-- 使用游标：提取游标当前指向的记录（提取之后，游标自动下移）</span></span><br><span class="line"><span class="keyword">fetch</span> 游标名称 <span class="keyword">into</span> xxx,yyy;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 示例</span></span><br><span class="line"><span class="keyword">fetch</span> mycursor <span class="keyword">into</span> cid,cname;</span><br></pre></td></tr></table></figure>

<p><strong>关闭游标</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="keyword">CLOSE</span> 游标名称; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 示例</span></span><br><span class="line"><span class="keyword">CLOSE</span> mycursor; </span><br></pre></td></tr></table></figure>

<h4 id="9-12-3-游标使用案例"><a href="#9-12-3-游标使用案例" class="headerlink" title="9.12.3 游标使用案例"></a>9.12.3 游标使用案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MySQL中， Concat_WS()  函数 用来通过指定符号，将2个或多个字段拼接在一起，返回拼接后的字符串。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test12(<span class="keyword">out</span> <span class="keyword">result</span> <span class="type">varchar</span>(<span class="number">200</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    # 游标变量</span><br><span class="line">    <span class="keyword">declare</span> cid <span class="type">int</span>;</span><br><span class="line">    # 游标变量</span><br><span class="line">    <span class="keyword">declare</span> cname <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line">    # 计数变量</span><br><span class="line">    <span class="keyword">declare</span> num <span class="type">int</span>;</span><br><span class="line">    # 计数变量</span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span>;</span><br><span class="line">    # 每条数据</span><br><span class="line">    <span class="keyword">declare</span> str <span class="type">varchar</span>(<span class="number">100</span>);</span><br><span class="line">    # 查询语句执行之后返回的是一个结果集（多条记录），使用游标遍历查询结果集</span><br><span class="line">    <span class="keyword">declare</span> mycursor <span class="keyword">cursor</span> <span class="keyword">for</span> <span class="keyword">select</span> class_id,class_name <span class="keyword">from</span> classes;</span><br><span class="line">    # 记录总数据量</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">into</span> num <span class="keyword">from</span> classes;</span><br><span class="line">    # 打开游标</span><br><span class="line">    <span class="keyword">open</span> mycursor;</span><br><span class="line">    <span class="keyword">set</span> i <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    # 开始遍历游标</span><br><span class="line">    while i<span class="operator">&lt;</span>num do</span><br><span class="line">        # 提取游标中的数据，并将结果赋值给游标变量</span><br><span class="line">        <span class="keyword">fetch</span> mycursor <span class="keyword">into</span> cid,cname;</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">        # <span class="keyword">set</span> str<span class="operator">=</span>concat_ws(<span class="string">&#x27;~&#x27;</span>,cid,cname); 不同的写法</span><br><span class="line">        <span class="keyword">select</span> concat_ws(<span class="string">&#x27;~&#x27;</span>,cid,cname) <span class="keyword">into</span> str;</span><br><span class="line">        <span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> concat_ws(<span class="string">&#x27;,&#x27;</span>,<span class="keyword">result</span>,str);</span><br><span class="line">    <span class="keyword">end</span> while;</span><br><span class="line">    <span class="keyword">close</span> mycursor;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"># 案例测试</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@r</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">call</span> proc_test12(<span class="variable">@r</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@r</span> <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<h2 id="十、触发器"><a href="#十、触发器" class="headerlink" title="十、触发器"></a>十、触发器</h2><h3 id="10-1-触发器介绍"><a href="#10-1-触发器介绍" class="headerlink" title="10.1 触发器介绍"></a>10.1 触发器介绍</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">触发器，就是一种特殊的存储过程。触发器和存储过程一样是一个能够完成特定功能、存储在数据库服务器上的SQL片段，但是触发器无需调用，当对数据表中的数据执行DML操作时自动触发</span><br><span class="line">这个SQL片段的执行，无需手动调用。在MySQL,只有执行insert\delete\update操作才能触发触发器的执行</span><br></pre></td></tr></table></figure>

<h3 id="10-2-创建触发器"><a href="#10-2-创建触发器" class="headerlink" title="10.2 创建触发器"></a>10.2 创建触发器</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> 触发器名称</span><br><span class="line"><span class="operator">&lt;</span>before<span class="operator">|</span>after<span class="operator">&gt;</span>                     <span class="comment">-- 定义触发时机</span></span><br><span class="line"><span class="operator">&lt;</span><span class="keyword">insert</span><span class="operator">|</span><span class="keyword">delete</span><span class="operator">|</span><span class="keyword">update</span><span class="operator">&gt;</span>             <span class="comment">-- 定义DML类型</span></span><br><span class="line"><span class="keyword">ON</span> 表名</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span>                       <span class="comment">-- 声明为行级触发器（只要操作一条记录就触发触发器执行一次）</span></span><br><span class="line">sql_statement                      <span class="comment">-- 触发器操作</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 示例</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_test1</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> students</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">insert into</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">values</span>(now(), concat(<span class="string">&#x27;添加&#x27;</span>,NEW.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="10-3-查看触发器"><a href="#10-3-查看触发器" class="headerlink" title="10.3 查看触发器"></a>10.3 查看触发器</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> triggers;</span><br></pre></td></tr></table></figure>

<h3 id="10-4-删除触发器"><a href="#10-4-删除触发器" class="headerlink" title="10.4 删除触发器"></a>10.4 删除触发器</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> 触发器名称;</span><br></pre></td></tr></table></figure>

<h3 id="10-5-NEW与OLD"><a href="#10-5-NEW与OLD" class="headerlink" title="10.5 NEW与OLD"></a>10.5 NEW与OLD</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">触发器用于监听对数据表中数据的insert、delete、update操作,在触发器中通常处理一些DML的关联操作;我们可以使用 NEW 和 OLD 关键字在触发器中获取触发这个触发器的DML操作的数据</span><br><span class="line">NEW: 在触发器中用于获取insert操作添加的数据、update操作修改后的记录</span><br><span class="line">OLD: 在触发器中用于获取delete操作删除前的数据、update操作修改前的数据</span><br></pre></td></tr></table></figure>

<p><strong>NEW</strong></p>
<ul>
<li>insert操作中：NEW表示添加的新记录</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_test1</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> students</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">insert into</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">values</span>(now(), concat(<span class="string">&#x27;添加&#x27;</span>,NEW.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>update操作中：NEW 表示修改后的数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建触发器 : 在监听update操作的触发器中，可以使用NEW获取修改后的数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_test2</span><br><span class="line">after <span class="keyword">update</span> <span class="keyword">on</span> students <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">insert into</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">values</span>(now(), concat(<span class="string">&#x27;修改学生信息为：&#x27;</span>,NEW.stu_num,NEW.stu_name));</span><br></pre></td></tr></table></figure>

<p><strong>OLD</strong></p>
<ul>
<li>delete操作中：OLD表示删除的记录</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_test3</span><br><span class="line">after <span class="keyword">delete</span> <span class="keyword">on</span> students <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">insert into</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">values</span>(now(), concat(<span class="string">&#x27;删除&#x27;</span>,OLD.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>update操作中：OLD表示修改前的记录</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_test2</span><br><span class="line">after <span class="keyword">update</span> <span class="keyword">on</span> students <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">insert into</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">values</span>(now(), concat(<span class="string">&#x27;将学生姓名从【&#x27;</span>,OLD.stu_name,<span class="string">&#x27;】修改为【&#x27;</span>,NEW.stu_name,<span class="string">&#x27;】&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="10-6-触发器使用终结"><a href="#10-6-触发器使用终结" class="headerlink" title="10.6 触发器使用终结"></a>10.6 触发器使用终结</h3><p><strong>优点</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">触发器是自动执行的,当对触发器相关的表执行响应的DML操作时立即执行;</span><br><span class="line">触发器可以实现表中的数据的级联操作(关联操作),有利于保证数据的完整性;</span><br><span class="line">触发器可以对DML操作的数据进行更为复杂的合法性校验(比如校验学员年龄)</span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用触发器实现的业务逻辑如果出现问题将难以定位,后期维护困难;</span><br><span class="line">大量使用触发器容易导致代码结构杂乱,增加了程序的复杂;</span><br><span class="line">当触发器操作的数据量比较大时,执行效率会大大降低。</span><br></pre></td></tr></table></figure>

<p><strong>使用建议</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在互联网项目中，应避免使用触发器；</span><br><span class="line">对于并发量不大的项目可以选择使用存储过程，但是在互联网引用中不提倡使用存储过程（原因：存储过程时将实现业务的逻辑交给数据库处理，一则增减了数据库的负载，二则不利于数据库的迁移）</span><br></pre></td></tr></table></figure>

<h2 id="十一、视图"><a href="#十一、视图" class="headerlink" title="十一、视图"></a>十一、视图</h2><h3 id="11-1-视图的概念"><a href="#11-1-视图的概念" class="headerlink" title="11.1 视图的概念"></a>11.1 视图的概念</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">视图，就是由数据库中一张表或者多张表根据特定的条件查询出得数据构造成得虚拟表</span><br></pre></td></tr></table></figure>

<h3 id="11-2-视图的作用"><a href="#11-2-视图的作用" class="headerlink" title="11.2 视图的作用"></a>11.2 视图的作用</h3><ul>
<li><p><strong>安全性</strong>：如果我们直接将数据表授权给用户操作，那么用户可以CRUD数据表中所有数据，加入我们想要对数据表中的部分数据进行保护，可以将公开的数据生成视图，授权用户访问视图；用户通过查询视图可以获取数据表中公开的数据，从而达到将数据表中的部分数据对用户隐藏。</p>
</li>
<li><p><strong>简单性</strong>：如果我们需要查询的数据来源于多张数据表，可以使用多表连接查询来实现；我们通过视图将这些连表查询的结果对用户开放，用户则可以直接通过查询视图获取多表数据，操作更便捷。</p>
</li>
</ul>
<h3 id="11-3-创建视图"><a href="#11-3-创建视图" class="headerlink" title="11.3 创建视图"></a>11.3 创建视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> 视图名称</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">select_statement</span><br></pre></td></tr></table></figure>

<h3 id="11-4-查看视图"><a href="#11-4-查看视图" class="headerlink" title="11.4 查看视图"></a>11.4 查看视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询视图结构</span></span><br><span class="line"><span class="keyword">desc</span> 视图名称;</span><br></pre></td></tr></table></figure>

<h3 id="11-5-修改视图"><a href="#11-5-修改视图" class="headerlink" title="11.5 修改视图"></a>11.5 修改视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式1</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">OR</span> REPLACE <span class="keyword">view</span> 视图名称</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">select_statement</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> 视图名称</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">select_statement</span><br></pre></td></tr></table></figure>

<h3 id="11-6-删除视图"><a href="#11-6-删除视图" class="headerlink" title="11.6 删除视图"></a>11.6 删除视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> 视图名称;</span><br></pre></td></tr></table></figure>

<h3 id="11-7-视图数据的特性"><a href="#11-7-视图数据的特性" class="headerlink" title="11.7 视图数据的特性"></a>11.7 视图数据的特性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">视图是虚拟表，查询视图的数据是来源于数据表的。当对视图进行操作时，对原数据表中的数据是否由影响呢？</span><br></pre></td></tr></table></figure>

<p><strong>查询操作</strong>：如果在原表中添加了新的数据，而且这个数据满足创建视图时查询语句的条件，通过查询视图也可以查询出新增的数据；当删除原表中满足查询条件的数据时，也会从视图中删除。</p>
<p><strong>新增数据</strong>：如果在视图中添加数据，数据会被添加到原数据表</p>
<p><strong>删除数据</strong>：如果从视图删除数据，数据也将从原表中删除</p>
<p><strong>修改操作</strong>：如果通过修改数据，则也将修改原数据表中的数据</p>
<p><code>视图的使用建议</code> : 对复杂查询简化操作，并且不会对数据进行修改的情况下可以使用视图。</p>
<h2 id="十二、索引"><a href="#十二、索引" class="headerlink" title="十二、索引"></a>十二、索引</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库是用来存储数据，在互联网应用中数据库中存储的数据可能会很多(大数据),数据表中数据的查询速度会随着数据量的增长逐渐变慢 ，从而导致响应用户请求的速度变慢——用户体验差，我们如何提高数据库的查询效率呢？</span><br></pre></td></tr></table></figure>

<h3 id="12-1-索引介绍"><a href="#12-1-索引介绍" class="headerlink" title="12.1 索引介绍"></a>12.1 索引介绍</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">索引，就是用来提高数据表中数据的查询效率的。</span><br><span class="line">索引，就是将数据表中某一列/某几列的值取出来构造成便于查找的结构进行存储，生成数据表的目录</span><br><span class="line">当我们进行数据查询的时候，则先在目录中进行查找得到对应的数据的地址，然后再到数据表中根据地址快速的获取数据记录，避免全表扫描。</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MySQL%E6%95%99%E7%A8%8B/image-20241013140940147.png" alt="image-20241013140940147"></p>
<h3 id="12-2-索引分类"><a href="#12-2-索引分类" class="headerlink" title="12.2 索引分类"></a>12.2 索引分类</h3><ul>
<li>主键索引：在数据表的主键字段创建的索引，这个字段必须被primary key修饰，每张表只能有一个主键</li>
<li>唯一索引：在数据表中的唯一列创建的索引(unique)，此列的所有值只能出现一次，可以为NULL</li>
<li>普通索引：在普通字段上创建的索引，没有唯一性的限制</li>
<li>组合索引：两个及以上字段联合起来创建的索引</li>
</ul>
<p><code>说明:</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 在创建数据表时,将字段声明为主键(添加主键约束),会自动在主键字段创建主键索引;</span><br><span class="line">2. 在创建数据表时,将字段声明为唯一键(添加唯一约束),会自动在唯一字段创建唯一索引;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-创建索引"><a href="#12-3-创建索引" class="headerlink" title="12.3 创建索引"></a>12.3 创建索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建唯一索引: 创建唯一索引的列的值不能重复</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index 索引名 <span class="keyword">on</span> 表名(列名);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建普通索引: 不要求创建索引的列的值的唯一性</span></span><br><span class="line"><span class="keyword">create</span> index 索引名 <span class="keyword">on</span> 表名(列名);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建组合索引</span></span><br><span class="line"><span class="keyword">create</span> index 索引名 <span class="keyword">on</span> 表名(列名<span class="number">1</span>,列名<span class="number">2.</span>..);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 全文索引(了解即可),MySQL 5.6 版本新增的索引，可以通过此索引进行全文检索操作，因为MySQL全文检索不支持中文，因此这个全文索引不被开发者关注，在应用开发中通常是通过搜索引擎（数据库中间件）实现全文检索</span></span><br><span class="line"><span class="keyword">create</span> fulltext index 索引名 <span class="keyword">on</span> 表名(字段名);</span><br></pre></td></tr></table></figure>

<h3 id="12-4-查看索引"><a href="#12-4-查看索引" class="headerlink" title="12.4 查看索引"></a>12.4 查看索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询索引</span></span><br><span class="line"><span class="keyword">show</span> keys <span class="keyword">from</span> 表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数据表的索引</span></span><br><span class="line"><span class="keyword">show</span> indexes <span class="keyword">from</span> 表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过创建表的语句查看索引</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create table</span> 表名;</span><br></pre></td></tr></table></figure>

<h3 id="12-5-删除索引"><a href="#12-5-删除索引" class="headerlink" title="12.5 删除索引"></a>12.5 删除索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除索引: 索引是建立在表的字段上的,不同的表中可能会出现相同名称的索引,因此删除索引时需要指定表名</span></span><br><span class="line"><span class="keyword">drop</span> index 索引名 <span class="keyword">on</span> 表名;</span><br></pre></td></tr></table></figure>

<h3 id="12-6-索引的使用"><a href="#12-6-索引的使用" class="headerlink" title="12.6 索引的使用"></a>12.6 索引的使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">索引创建完成之后无需调用,当根据创建索引的列进行数据查询的时候,会自动使用索引;</span><br><span class="line">组合索引需要根据创建索引的所有字段进行查询时触发（例如: tid=250000 and name=&#x27;aaa&#x27;）。</span><br></pre></td></tr></table></figure>

<p><code>在命令行窗口中可以查看查询语句的查询规划：</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select_statement</span><br></pre></td></tr></table></figure>

<h3 id="12-7-索引的使用总结"><a href="#12-7-索引的使用总结" class="headerlink" title="12.7 索引的使用总结"></a>12.7 索引的使用总结</h3><p><strong>优点</strong></p>
<ul>
<li>索引大大降低了数据库服务器在执行查询操作时扫描的数据量，提高查询效率</li>
<li>索引可以避免服务器排序、将随机IO变成顺序IO</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>索引是根据数据表列的创建的，当数据表中数据发生DML操作时，索引页需要更新；</li>
<li>索引文件也会占用磁盘空间；</li>
</ul>
<p><strong>注意事项</strong></p>
<ul>
<li>数据表中数据不多时，全表扫面可能更快，不要使用索引；</li>
<li>数据量大但是DML操作很频繁时，不建议使用索引；</li>
<li>不要在数据重复度高的列上创建索引（性别）；</li>
<li>创建索引之后，要注意查询SQL语句的编写，避免索引失效。</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/1c708cfe708256c27d45527ab213aa00.jpeg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/1c708cfe708256c27d45527ab213aa00.jpeg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Mr.Chen</div><div class="post-copyright__author_desc">探索科技,启迪人生</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://chenhaonan.dpdns.org/posts/b9a6/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://chenhaonan.dpdns.org/posts/b9a6/')">MySQL教程</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://i.mji.rip/2025/11/25/4ace5945b5c9ad95d20b0e358431eec6.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/4ace5945b5c9ad95d20b0e358431eec6.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://i.mji.rip/2025/11/25/2f9f7712d93dfbf45033d2b86243fbb3.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/2f9f7712d93dfbf45033d2b86243fbb3.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://chenhaonan.dpdns.org/posts/b9a6/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=MySQL教程&amp;url=https://chenhaonan.dpdns.org/posts/b9a6/&amp;pic=/../images/MySQL%E6%95%99%E7%A8%8B/cover.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://chenhaonan.dpdns.org" target="_blank">Johnny的空间站</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E6%95%99%E7%A8%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>教程<span class="tagsPageCount">7</span></a><a class="post-meta__box__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>数据库<span class="tagsPageCount">3</span></a><a class="post-meta__box__tags" href="/tags/MySQL/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>MySQL<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/RDBMS/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>RDBMS<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/../images/SpringBoot%E6%95%B4%E5%90%88Redis/cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/b280/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Maven%E6%95%99%E7%A8%8B/cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Maven教程</div></div></a></div><div class="next-post pull-right"><a href="/posts/5c27/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/JDBC/cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JDBC</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/7cd4/" title="MyBatis教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/MyBatis%E6%95%99%E7%A8%8B/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-10-14</div><div class="title">MyBatis教程</div></div></a></div><div><a href="/posts/6139/" title="Docker教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Docker%E6%95%99%E7%A8%8B/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-11-10</div><div class="title">Docker教程</div></div></a></div><div><a href="/posts/9c04/" title="Html教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Html%E6%95%99%E7%A8%8B/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-12</div><div class="title">Html教程</div></div></a></div><div><a href="/posts/69d9/" title="Linux教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Linux%E6%95%99%E7%A8%8B/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-18</div><div class="title">Linux教程</div></div></a></div><div><a href="/posts/b280/" title="Maven教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Maven%E6%95%99%E7%A8%8B/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-03</div><div class="title">Maven教程</div></div></a></div><div><a href="/posts/9da6/" title="VMware下载教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/VMware%E4%B8%8B%E8%BD%BD%E6%95%99%E7%A8%8B/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-18</div><div class="title">VMware下载教程</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/1c708cfe708256c27d45527ab213aa00.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/97d5391fd871391b19ce4a2da03f8a37.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">分享自己对技术的<b style="color:#fff">热爱</b>、对美好生活的<b style="color:#fff">向往</b>和对知识海洋的<b style="color:#fff">探索历程</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Mr.Chen</h1><div class="author-info__desc">探索科技,启迪人生</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/CodeChenHao" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/328095151" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">一、数据库相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BD%AF%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 数据库软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-SQL"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 SQL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%B8%B8%E8%A7%81%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.</span> <span class="toc-text">二、常见的关系型数据库管理系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81MySQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.</span> <span class="toc-text">三、MySQL数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%AE%89%E8%A3%85MySQL"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 安装MySQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%AE%BE%E7%BD%AERoot%E8%B4%A6%E6%88%B7%E5%8F%AF%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 设置Root账户可远程访问数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%8D%B8%E8%BD%BDMySQL"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 卸载MySQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-MySQL%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 MySQL的数据模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SQL"><span class="toc-number">4.</span> <span class="toc-text">四、SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-SQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 SQL通用语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-SQL%E5%88%86%E7%B1%BB"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 SQL分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-DDL"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1 数据库相关操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2 数据表相关操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.3.3.</span> <span class="toc-text">4.3.3 数据类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-DML"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 DML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-%E5%A2%9E%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.4.1 增加数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.4.2 删除数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-3-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.3.</span> <span class="toc-text">4.4.3 修改数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-DQL"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 DQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-1-%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.5.1.</span> <span class="toc-text">4.5.1 基础查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.5.2.</span> <span class="toc-text">4.5.2 条件查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-3-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.5.3.</span> <span class="toc-text">4.5.3 分组查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-4-%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.5.4.</span> <span class="toc-text">4.5.4 排序查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-5-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.5.5.</span> <span class="toc-text">4.5.5 分页查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%BA%A6%E6%9D%9F"><span class="toc-number">5.</span> <span class="toc-text">五、约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 约束的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E7%BA%A6%E6%9D%9F%E5%88%86%E7%B1%BB"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 约束分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E8%87%AA%E5%A2%9E%E9%95%BF"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 自增长</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F-%E9%9D%9E%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 添加约束(非外键约束)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-1-%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E6%B7%BB%E5%8A%A0"><span class="toc-number">5.4.1.</span> <span class="toc-text">5.4.1 创建表的时候添加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-2-%E5%88%9B%E5%BB%BA%E5%AE%8C%E8%A1%A8%E4%B9%8B%E5%90%8E%E6%B7%BB%E5%8A%A0"><span class="toc-number">5.4.2.</span> <span class="toc-text">5.4.2 创建完表之后添加</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F-%E9%9D%9E%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 删除约束(非外键约束)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 添加外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6-1-%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E6%B7%BB%E5%8A%A0"><span class="toc-number">5.6.1.</span> <span class="toc-text">5.6.1 创建表的时候添加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6-2-%E5%88%9B%E5%BB%BA%E5%AE%8C%E8%A1%A8%E4%B9%8B%E5%90%8E%E6%B7%BB%E5%8A%A0"><span class="toc-number">5.6.2.</span> <span class="toc-text">5.6.2 创建完表之后添加</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">5.7.</span> <span class="toc-text">5.7 删除外键约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">6.</span> <span class="toc-text">六、数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 数据库设计的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E8%A1%A8%E4%B8%8E%E8%A1%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 表与表之间的关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1 一对一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2-%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="toc-number">6.2.2.</span> <span class="toc-text">6.2.2 一对多</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-number">6.2.3.</span> <span class="toc-text">6.2.3 多对多</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">七、多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 笛卡尔积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.1.</span> <span class="toc-text">7.2.1 内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2-%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.2.</span> <span class="toc-text">7.2.2 外连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-1-%E5%8D%95%E8%A1%8C%E5%8D%95%E5%88%97"><span class="toc-number">7.3.1.</span> <span class="toc-text">7.3.1 单行单列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-2-%E5%A4%9A%E8%A1%8C%E5%8D%95%E5%88%97"><span class="toc-number">7.3.2.</span> <span class="toc-text">7.3.2 多行单列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-3-%E5%A4%9A%E8%A1%8C%E5%A4%9A%E5%88%97"><span class="toc-number">7.3.3.</span> <span class="toc-text">7.3.3 多行多列</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BA%8B%E5%8A%A1"><span class="toc-number">8.</span> <span class="toc-text">八、事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 事务简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 事务操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E4%BA%8B%E5%8A%A1%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 事务四大特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-MySQL%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%8F%90%E4%BA%A4%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 MySQL事务的提交方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">8.5.</span> <span class="toc-text">8.5 事务的隔离级别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-1-%E8%AF%BB%E6%9C%AA%E6%8F%90%E4%BA%A4-read-uncommitted"><span class="toc-number">8.5.1.</span> <span class="toc-text">8.5.1  读未提交(read uncommitted)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-2-%E8%AF%BB%E5%B7%B2%E6%8F%90%E4%BA%A4-read-committed"><span class="toc-number">8.5.2.</span> <span class="toc-text">8.5.2 读已提交(read committed)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-3-%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB-repeatable-read"><span class="toc-number">8.5.3.</span> <span class="toc-text">8.5.3 可重复读(repeatable read)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-4-%E4%B8%B2%E8%A1%8C%E5%8C%96-serializable"><span class="toc-number">8.5.4.</span> <span class="toc-text">8.5.4 串行化(serializable)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-5-%E8%AE%BE%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">8.5.5.</span> <span class="toc-text">8.5.5 设置数据库事务隔离级别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">9.</span> <span class="toc-text">九、存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-SQL%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 SQL指令执行过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 存储过程介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%BC%98%E7%BC%BA%E7%82%B9%E5%88%86%E6%9E%90"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 存储过程优缺点分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">9.4.</span> <span class="toc-text">9.4 创建存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">9.5.</span> <span class="toc-text">9.5 调用存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-number">9.6.</span> <span class="toc-text">9.6 存储过程中的变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-1-%E5%AE%9A%E4%B9%89%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">9.6.1.</span> <span class="toc-text">9.6.1 定义局部变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-2-%E5%AE%9A%E4%B9%89%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F"><span class="toc-number">9.6.2.</span> <span class="toc-text">9.6.2 定义用户变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-3-%E7%BB%99%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC"><span class="toc-number">9.6.3.</span> <span class="toc-text">9.6.3 给变量赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-4-%E5%B0%86%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E8%B5%8B%E5%80%BC%E7%BB%99%E5%8F%98%E9%87%8F"><span class="toc-number">9.6.4.</span> <span class="toc-text">9.6.4 将查询结果赋值给变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-5-%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">9.6.5.</span> <span class="toc-text">9.6.5 用户变量使用注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">9.7.</span> <span class="toc-text">9.7 存储过程的参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-7-1-IN-%E8%BE%93%E5%85%A5%E5%8F%82%E6%95%B0"><span class="toc-number">9.7.1.</span> <span class="toc-text">9.7.1 IN 输入参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-7-2-OUT-%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-number">9.7.2.</span> <span class="toc-text">9.7.2 OUT 输出参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-7-3-INOUT-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-number">9.7.3.</span> <span class="toc-text">9.7.3 INOUT 输入输出参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">9.8.</span> <span class="toc-text">9.8 存储过程中的流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-8-1-%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">9.8.1.</span> <span class="toc-text">9.8.1 分支语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-8-2-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">9.8.2.</span> <span class="toc-text">9.8.2 循环语句</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-9-%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">9.9.</span> <span class="toc-text">9.9 查询存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-10-%E4%BF%AE%E6%94%B9%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">9.10.</span> <span class="toc-text">9.10 修改存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-11-%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">9.11.</span> <span class="toc-text">9.11 删除存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-12-%E6%B8%B8%E6%A0%87"><span class="toc-number">9.12.</span> <span class="toc-text">9.12 游标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-12-1-%E6%B8%B8%E6%A0%87%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">9.12.1.</span> <span class="toc-text">9.12.1 游标的概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-12-2-%E6%B8%B8%E6%A0%87%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-number">9.12.2.</span> <span class="toc-text">9.12.2 游标使用步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-12-3-%E6%B8%B8%E6%A0%87%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">9.12.3.</span> <span class="toc-text">9.12.3 游标使用案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">10.</span> <span class="toc-text">十、触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 触发器介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 创建触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E6%9F%A5%E7%9C%8B%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">10.3.</span> <span class="toc-text">10.3 查看触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E5%88%A0%E9%99%A4%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">10.4.</span> <span class="toc-text">10.4 删除触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-NEW%E4%B8%8EOLD"><span class="toc-number">10.5.</span> <span class="toc-text">10.5 NEW与OLD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BD%BF%E7%94%A8%E7%BB%88%E7%BB%93"><span class="toc-number">10.6.</span> <span class="toc-text">10.6 触发器使用终结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%A7%86%E5%9B%BE"><span class="toc-number">11.</span> <span class="toc-text">十一、视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E8%A7%86%E5%9B%BE%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 视图的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 视图的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">11.3.</span> <span class="toc-text">11.3 创建视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-%E6%9F%A5%E7%9C%8B%E8%A7%86%E5%9B%BE"><span class="toc-number">11.4.</span> <span class="toc-text">11.4 查看视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE"><span class="toc-number">11.5.</span> <span class="toc-text">11.5 修改视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-number">11.6.</span> <span class="toc-text">11.6 删除视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-7-%E8%A7%86%E5%9B%BE%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">11.7.</span> <span class="toc-text">11.7 视图数据的特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E7%B4%A2%E5%BC%95"><span class="toc-number">12.</span> <span class="toc-text">十二、索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E7%B4%A2%E5%BC%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 索引介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span class="toc-number">12.2.</span> <span class="toc-text">12.2 索引分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">12.3.</span> <span class="toc-text">12.3 创建索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95"><span class="toc-number">12.4.</span> <span class="toc-text">12.4 查看索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-5-%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">12.5.</span> <span class="toc-text">12.5 删除索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-6-%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">12.6.</span> <span class="toc-text">12.6 索引的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-7-%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93"><span class="toc-number">12.7.</span> <span class="toc-text">12.7 索引的使用总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/35f5/" title="SpringBoot整合Redis"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/SpringBoot%E6%95%B4%E5%90%88Redis/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot整合Redis"/></a><div class="content"><a class="title" href="/posts/35f5/" title="SpringBoot整合Redis">SpringBoot整合Redis</a><time datetime="2025-11-23T16:00:00.000Z" title="发表于 2025-11-24 00:00:00">2025-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1f7a/" title="Docker2Compose"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Docker2Compose/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker2Compose"/></a><div class="content"><a class="title" href="/posts/1f7a/" title="Docker2Compose">Docker2Compose</a><time datetime="2025-11-22T16:00:00.000Z" title="发表于 2025-11-23 00:00:00">2025-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5d95/" title="Docker应用部署"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Docker%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker应用部署"/></a><div class="content"><a class="title" href="/posts/5d95/" title="Docker应用部署">Docker应用部署</a><time datetime="2025-11-10T16:00:00.000Z" title="发表于 2025-11-11 00:00:00">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6139/" title="Docker教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Docker%E6%95%99%E7%A8%8B/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker教程"/></a><div class="content"><a class="title" href="/posts/6139/" title="Docker教程">Docker教程</a><time datetime="2025-11-09T16:00:00.000Z" title="发表于 2025-11-10 00:00:00">2025-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/20db/" title="Linux常用脚本"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/Linux%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux常用脚本"/></a><div class="content"><a class="title" href="/posts/20db/" title="Linux常用脚本">Linux常用脚本</a><time datetime="2025-10-04T16:00:00.000Z" title="发表于 2025-10-05 00:00:00">2025-10-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:1835824864@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/CodeChenHao" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/1c708cfe708256c27d45527ab213aa00.jpeg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/328095151" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://v.douyin.com/EI8nvl-cvx0/" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Mr.Chen" target="_blank">Mr.Chen</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://mjj.today/" title="图床">图床</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">3</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">代码托管</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/9a3038ba0b7d4515df5c663d8a6a2469.png" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/b6e0c3428fd3783d83d14960fbbb57a0.png" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://tool.lu/" title="在线工具"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/30/472ebcada7a3e883391c21028c7112eb.png" alt="在线工具"/><span class="back-menu-item-text">在线工具</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://2925.com/" title="2529邮箱"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/73a5a6b561d3f82301e726a911d9add3.png" alt="2529邮箱"/><span class="back-menu-item-text">2529邮箱</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.ip.cn/" title="IP地址查询"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/30/ac05acdf53e09f62c657b7cba766905a.png" alt="IP地址查询"/><span class="back-menu-item-text">IP地址查询</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://otp.landian.vip/zh-cn/" title="Office Tool Plus"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/30/8b1aad9e91d6b746141420287f98234d.png" alt="Office Tool Plus"/><span class="back-menu-item-text">Office Tool Plus</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.processon.com/" title="ProcessOn"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/30/a9cccc5064d769ef4590035207b6cb01.png" alt="ProcessOn"/><span class="back-menu-item-text">ProcessOn</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://mjj.today/" title="图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.mji.rip/2025/11/25/07fd4c34a272fa061f507cf5534d2dad.png" alt="图床"/><span class="back-menu-item-text">图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 文章列表</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 全部分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 全部标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=7784481513&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 留言板</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/CentOS7/" style="font-size: 0.88rem;">CentOS7<sup>3</sup></a><a href="/tags/Docker/" style="font-size: 0.88rem;">Docker<sup>3</sup></a><a href="/tags/HTML/" style="font-size: 0.88rem;">HTML<sup>1</sup></a><a href="/tags/JDBC/" style="font-size: 0.88rem;">JDBC<sup>1</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>5</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>1</sup></a><a href="/tags/Mybatis/" style="font-size: 0.88rem;">Mybatis<sup>1</sup></a><a href="/tags/RDBMS/" style="font-size: 0.88rem;">RDBMS<sup>1</sup></a><a href="/tags/Redis/" style="font-size: 0.88rem;">Redis<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 0.88rem;">Spring<sup>1</sup></a><a href="/tags/SpringBoot/" style="font-size: 0.88rem;">SpringBoot<sup>1</sup></a><a href="/tags/Vmware/" style="font-size: 0.88rem;">Vmware<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 0.88rem;">后端<sup>12</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">工具<sup>3</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">操作系统<sup>2</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>7</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>3</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" style="font-size: 0.88rem;">虚拟化<sup>2</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/" style="font-size: 0.88rem;">项目构建<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="7784481513" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"><a class="tag-list" href="/tags/%E5%89%8D%E7%AB%AF" title="前端">前端</a><a class="tag-list" href="/tags/%E5%90%8E%E7%AB%AF" title="后端">后端</a><a class="tag-list" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93" title="数据库">数据库</a></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/my/m/music/playlist?id=7784481513&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("11/22/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Mr.Chen 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("11/22/2025 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-ruddy-six.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-ruddy-six.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-ruddy-six.vercel.app/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "johnnyemail@2925.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>