---
layout: post
title: CentOS7配置静态IP
description: 在VMware中安装的Centos7配置静态IP
tags: Linux操作系统
---

## 一、为什么需要配置静态IP

```shell
由于虚拟机IP经常改变，使用远程连接工具连接不成功，需要先查询最新IP，然后再使用远程连接工具进行连接，这样就有点麻烦。如果修改DHCP的最长租用时间，即使修改到最大值，到期后，还是会改变IP。所以，还是直接配置静态IP，这样就不会出现IP改变的情况。
```

## 二、如何配置静态IP

### 2.1 查看VMware网络配置信息

![image-20251012211633090](/images/posts/2025-10-12-CenOS7配置静态IP/image-20251012211633090.png)

![image-20251012211659669](/images/posts/2025-10-12-CenOS7配置静态IP/image-20251012211659669.png)

![image-20251012211802697](/images/posts/2025-10-12-CenOS7配置静态IP/image-20251012211802697.png)

![image-20251012211831825](/images/posts/2025-10-12-CenOS7配置静态IP/image-20251012211831825.png)

```
从上面的截图中可以得到如下信息:

IP地址范围：192.168.10.10 - 192.168.10.254
子网掩码：255.255.255.0
网关：192.168.10.2
```

### 2.2 修改配置文件

```
配置文件所在目录为/etc/sysconfig/network-scripts，一般以ifcfg-开头，如ifcfg-ens33、ifcfg-eth0等。
```

查看配置文件内容（/etc/sysconfig/network-scripts/ifcfg-ens33）：

```
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=f50ffcfa-6f5f-420b-a931-a02389b998ab
DEVICE=ens33
ONBOOT=yes
```

修改以下参数：

```
BOOTPROTO=static
ONBOOT=yes
IPADDR=192.168.10.10
NETMASK=255.255.255.0
GATEWAY=192.168.10.2
DNS1=192.168.10.2
DNS2=8.8.8.8
DNS3=8.8.4.4
```

查看完整内容：

```
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=static
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=f50ffcfa-6f5f-420b-a931-a02389b998ab
DEVICE=ens33
ONBOOT=yes
IPADDR=192.168.10.10
NETMASK=255.255.255.0
GATEWAY=192.168.10.2
DNS1=192.168.10.2
DNS2=8.8.8.8
DNS3=8.8.4.4
```

### 2.3 重启网络

```shell
systemctl restart network
```

### 2.4 查看IP

```shell
ip addr
```
